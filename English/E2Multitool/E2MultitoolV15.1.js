// ==UserScript==
// @name         E2 Multitool for earth2.io
// @namespace    http://tampermonkey.net/
// @version      15.1
// @description  E2 Multitool for earth2.io
// @author       ExKcir (Referral-Code: E2Multitool)
// @include      https://*app.earth2.io/
// @icon         https://www.google.com/s2/favicons?domain=earth2.io
// @require http://code.jquery.com/jquery-3.4.1.min.js
// @require https://code.jquery.com/ui/1.13.2/jquery-ui.js
// @require https://www.webglearth.com/v2/api.js
// @grant        none
// ==/UserScript==

// https://raw.githubusercontent.com/ExKcir/Earth2Scripts/main/English/E2Multitool/include/version.js
// https://cdn.rawgit.com/openlayers/openlayers.github.io/master/en/v5.3.0/build/ol.js

var version = "15.1";



var TimetoWait = 500; //500 ms
var TotalApiRequests = 0 ;
var tmp = "";


var EssenceBeforeClaimAndTransform = 0;
var PromisedEssenceBeforeClaimAndTransform = 0;
var Ether = 0;


var earth;
var MapProperties = [];
var PropertiesDataDate = "";
var Markers = [];


var IMGMarkerRedCircle = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAB2SURBVChTjZC9FYAgDIQvWUE7LVnCQXQPJ3EQBmEJSu10BZHjp+Th15BL7iW8ExSeyaxBsMdyoQ6A1QA7XN5SJ+M9m9hvM55elJuKbkKPvoKukV+S3tmKlrcLjS6XbVICEnAU3YQx/Y+nFnHzxhNpknHscQYAH98JJ3YHBubHAAAAAElFTkSuQmCC';
var IMGMarkerYellowCircle = 'data:image/png;base64,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RIya6/MOnzpv+1RW7Xd/rubEimuCTxMeNXNOXnhZeHgtn1O8Kxwy03pC+Ey415EChR+UbpT4VXGqyH6VGXJi0THhkLCWqmKjis20YwlLh3QlLFvy/fMlTiheV2xlC2a5TtVh04o9N6t02Z1MMkWEGTQMCmTIkqdPTlsUl6jch2v4O4r+GXEZ4spgimOcVSz0oh/1B79n6yYHB0pJTWGof/a8924IbsP3lud9HXne9zEEnuDSrvhXD2HkQ/StitZ1AC0bcH5V0YwduNiE9sec7uhFKSDbn0zC26l8Uxxab6BxsTS38j0n9xCTWU1fw94+9KQke6lG3w3Vc/v3TXl+P3p8cqrJGJuYAAAPVWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNC40LjAtRXhpdjIiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgeG1sbnM6aXB0Y0V4dD0iaHR0cDovL2lwdGMub3JnL3N0ZC9JcHRjNHhtcEV4dC8yMDA4LTAyLTI5LyIKICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgIHhtbG5zOnBsdXM9Imh0dHA6Ly9ucy51c2VwbHVzLm9yZy9sZGYveG1wLzEuMC8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iCiAgIHhtcE1NOkRvY3VtZW50SUQ9ImdpbXA6ZG9jaWQ6Z2ltcDphNzc5NDM3NS01ZDVmLTRmZmQtOWFmMy0yZTVhNWIwMTJhMmEiCiAgIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzFkNjI1ZTgtYTQxOC00MzhlLTg1MDItMGM5MzEwMzczYzQxIgogICB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6NGM3MDRiNDktYWFjMC00OWNhLTg5NjEtOTE4N2YwZjA5ZGIwIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJXaW5kb3dzIgogICBHSU1QOlRpbWVTdGFtcD0iMTY1ODU1ODQ3ODMxODk4NSIKICAgR0lNUDpWZXJzaW9uPSIyLjEwLjIwIgogICBkYzpGb3JtYXQ9ImltYWdlL3BuZyIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8aXB0Y0V4dDpMb2NhdGlvbkNyZWF0ZWQ+CiAgICA8cmRmOkJhZy8+CiAgIDwvaXB0Y0V4dDpMb2NhdGlvbkNyZWF0ZWQ+CiAgIDxpcHRjRXh0OkxvY2F0aW9uU2hvd24+CiAgICA8cmRmOkJhZy8+CiAgIDwvaXB0Y0V4dDpMb2NhdGlvblNob3duPgogICA8aXB0Y0V4dDpBcnR3b3JrT3JPYmplY3Q+CiAgICA8cmRmOkJhZy8+CiAgIDwvaXB0Y0V4dDpBcnR3b3JrT3JPYmplY3Q+CiAgIDxpcHRjRXh0OlJlZ2lzdHJ5SWQ+CiAgICA8cmRmOkJhZy8+CiAgIDwvaXB0Y0V4dDpSZWdpc3RyeUlkPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDplMjhiNDI5OC1kMTRmLTQyNmQtYWM1MC05MmE0MjA4YTk1ZWEiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoV2luZG93cykiCiAgICAgIHN0RXZ0OndoZW49IjIwMjItMDctMjNUMDg6NDE6MTgiLz4KICAgIDwvcmRmOlNlcT4KICAgPC94bXBNTTpIaXN0b3J5PgogICA8cGx1czpJbWFnZVN1cHBsaWVyPgogICAgPHJkZjpTZXEvPgogICA8L3BsdXM6SW1hZ2VTdXBwbGllcj4KICAgPHBsdXM6SW1hZ2VDcmVhdG9yPgogICAgPHJkZjpTZXEvPgogICA8L3BsdXM6SW1hZ2VDcmVhdG9yPgogICA8cGx1czpDb3B5cmlnaHRPd25lcj4KICAgIDxyZGY6U2VxLz4KICAgPC9wbHVzOkNvcHlyaWdodE93bmVyPgogICA8cGx1czpMaWNlbnNvcj4KICAgIDxyZGY6U2VxLz4KICAgPC9wbHVzOkxpY2Vuc29yPgogIDwvcmRmOkRlc2NyaXB0aW9uPgogPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgIAo8P3hwYWNrZXQgZW5kPSJ3Ij8+ubTjNQAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAAOwwAADsMBx2+oZAAAAAd0SU1FB+YHFwYpEsBVcxgAAAAxSURBVBjTY2SAgveP+P8zYAGCch8ZGRgYGBjxKUJWzEhIEQwwMRAJhoJC4oOH2AAHAMfGEu8IiehzAAAAAElFTkSuQmCC';
var IMGMarkerBlackCircle = 'data:image/png;base64,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Yy5vcmcvc3RkL0lwdGM0eG1wRXh0LzIwMDgtMDItMjkvIgogICAgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iCiAgICB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIgogICAgeG1sbnM6cGx1cz0iaHR0cDovL25zLnVzZXBsdXMub3JnL2xkZi94bXAvMS4wLyIKICAgIHhtbG5zOkdJTVA9Imh0dHA6Ly93d3cuZ2ltcC5vcmcveG1wLyIKICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOmQ2OTZkMmI4LTI3MTQtNDkzMS04ZTI3LTkzYTJjYmRlMTA3NSIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyNTFkZDkyMy0zZmZkLTRkYmMtODkzMC1kYWU0MjUxZGJhMTgiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpiMGFjZDIxYS05ZjhjLTQ5OTUtYmQ2Ny1hZmIxYWE2ZWFhOTQiCiAgIEdJTVA6QVBJPSIyLjAiCiAgIEdJTVA6UGxhdGZvcm09IldpbmRvd3MiCiAgIEdJTVA6VGltZVN0YW1wPSIxNjU4NTU4NTQxNTM1OTIwIgogICBHSU1QOlZlcnNpb249IjIuMTAuMjAiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICB4bXA6Q3JlYXRvclRvb2w9IkdJTVAgMi4xMCI+CiAgIDxpcHRjRXh0OkxvY2F0aW9uQ3JlYXRlZD4KICAgIDxyZGY6QmFnLz4KICAgPC9pcHRjRXh0OkxvY2F0aW9uQ3JlYXRlZD4KICAgPGlwdGNFeHQ6TG9jYXRpb25TaG93bj4KICAgIDxyZGY6QmFnLz4KICAgPC9pcHRjRXh0OkxvY2F0aW9uU2hvd24+CiAgIDxpcHRjRXh0OkFydHdvcmtPck9iamVjdD4KICAgIDxyZGY6QmFnLz4KICAgPC9pcHRjRXh0OkFydHdvcmtPck9iamVjdD4KICAgPGlwdGNFeHQ6UmVnaXN0cnlJZD4KICAgIDxyZGY6QmFnLz4KICAgPC9pcHRjRXh0OlJlZ2lzdHJ5SWQ+CiAgIDx4bXBNTTpIaXN0b3J5PgogICAgPHJkZjpTZXE+CiAgICAgPHJkZjpsaQogICAgICBzdEV2dDphY3Rpb249InNhdmVkIgogICAgICBzdEV2dDpjaGFuZ2VkPSIvIgogICAgICBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjAwYjVkOWIwLWYwN2ItNGNhMC04N2M0LTkyMjI1N2E3ZmY3OCIKICAgICAgc3RFdnQ6c29mdHdhcmVBZ2VudD0iR2ltcCAyLjEwIChXaW5kb3dzKSIKICAgICAgc3RFdnQ6d2hlbj0iMjAyMi0wNy0yM1QwODo0MjoyMSIvPgogICAgPC9yZGY6U2VxPgogICA8L3htcE1NOkhpc3Rvcnk+CiAgIDxwbHVzOkltYWdlU3VwcGxpZXI+CiAgICA8cmRmOlNlcS8+CiAgIDwvcGx1czpJbWFnZVN1cHBsaWVyPgogICA8cGx1czpJbWFnZUNyZWF0b3I+CiAgICA8cmRmOlNlcS8+CiAgIDwvcGx1czpJbWFnZUNyZWF0b3I+CiAgIDxwbHVzOkNvcHlyaWdodE93bmVyPgogICAgPHJkZjpTZXEvPgogICA8L3BsdXM6Q29weXJpZ2h0T3duZXI+CiAgIDxwbHVzOkxpY2Vuc29yPgogICAgPHJkZjpTZXEvPgogICA8L3BsdXM6TGljZW5zb3I+CiAgPC9yZGY6RGVzY3JpcHRpb24+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz7GcGJYAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAB3RJTUUH5gcXBioVdRy1eAAAAC9JREFUGNNjZIACVgaG/wxYwG8GBkYGBiiBSxGyYkZCimCAiYFIMBQUEh88xAY4ALGyCRS8efw9AAAAAElFTkSuQmCC';
var IMGMarkerGreyCircle = 'data:image/png;base64,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Yy5vcmcvc3RkL0lwdGM0eG1wRXh0LzIwMDgtMDItMjkvIgogICAgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iCiAgICB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIgogICAgeG1sbnM6cGx1cz0iaHR0cDovL25zLnVzZXBsdXMub3JnL2xkZi94bXAvMS4wLyIKICAgIHhtbG5zOkdJTVA9Imh0dHA6Ly93d3cuZ2ltcC5vcmcveG1wLyIKICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjUxMDdhNjgyLTViNDEtNDFiMC1iNmMyLTA4YmU0ZmYzOWM0OCIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2ZDRlODk4Mi0xOTkxLTQyODYtOGI4MS0wM2Q3NjhjMmFlMjMiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0MDA4MWNjZi0wYmIxLTQ2ZTgtODY1NS05MjU2NzFiYjA4MjQiCiAgIEdJTVA6QVBJPSIyLjAiCiAgIEdJTVA6UGxhdGZvcm09IldpbmRvd3MiCiAgIEdJTVA6VGltZVN0YW1wPSIxNjU4NTU4NTkwMTY2MzMyIgogICBHSU1QOlZlcnNpb249IjIuMTAuMjAiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICB4bXA6Q3JlYXRvclRvb2w9IkdJTVAgMi4xMCI+CiAgIDxpcHRjRXh0OkxvY2F0aW9uQ3JlYXRlZD4KICAgIDxyZGY6QmFnLz4KICAgPC9pcHRjRXh0OkxvY2F0aW9uQ3JlYXRlZD4KICAgPGlwdGNFeHQ6TG9jYXRpb25TaG93bj4KICAgIDxyZGY6QmFnLz4KICAgPC9pcHRjRXh0OkxvY2F0aW9uU2hvd24+CiAgIDxpcHRjRXh0OkFydHdvcmtPck9iamVjdD4KICAgIDxyZGY6QmFnLz4KICAgPC9pcHRjRXh0OkFydHdvcmtPck9iamVjdD4KICAgPGlwdGNFeHQ6UmVnaXN0cnlJZD4KICAgIDxyZGY6QmFnLz4KICAgPC9pcHRjRXh0OlJlZ2lzdHJ5SWQ+CiAgIDx4bXBNTTpIaXN0b3J5PgogICAgPHJkZjpTZXE+CiAgICAgPHJkZjpsaQogICAgICBzdEV2dDphY3Rpb249InNhdmVkIgogICAgICBzdEV2dDpjaGFuZ2VkPSIvIgogICAgICBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmMxMGM1NGQ4LTUwMzgtNDk3ZC04Yzc0LWVlZjBmNGVlZWZiZCIKICAgICAgc3RFdnQ6c29mdHdhcmVBZ2VudD0iR2ltcCAyLjEwIChXaW5kb3dzKSIKICAgICAgc3RFdnQ6d2hlbj0iMjAyMi0wNy0yM1QwODo0MzoxMCIvPgogICAgPC9yZGY6U2VxPgogICA8L3htcE1NOkhpc3Rvcnk+CiAgIDxwbHVzOkltYWdlU3VwcGxpZXI+CiAgICA8cmRmOlNlcS8+CiAgIDwvcGx1czpJbWFnZVN1cHBsaWVyPgogICA8cGx1czpJbWFnZUNyZWF0b3I+CiAgICA8cmRmOlNlcS8+CiAgIDwvcGx1czpJbWFnZUNyZWF0b3I+CiAgIDxwbHVzOkNvcHlyaWdodE93bmVyPgogICAgPHJkZjpTZXEvPgogICA8L3BsdXM6Q29weXJpZ2h0T3duZXI+CiAgIDxwbHVzOkxpY2Vuc29yPgogICAgPHJkZjpTZXEvPgogICA8L3BsdXM6TGljZW5zb3I+CiAgPC9yZGY6RGVzY3JpcHRpb24+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz4xNYLWAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAB3RJTUUH5gcXBisK4Q+JzAAAADBJREFUGNNjZICC7vb2/wxYQGllJSMDAwMDIz5FyIoZCSmCASYGIsFQUEh88BAb4ABNcBKoz7vutgAAAABJRU5ErkJggg==';
var IMGMarkerDarkGreyCircle = 'data:image/png;base64,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ZS5jb20veGFwLzEuMC8iCiAgIHhtcE1NOkRvY3VtZW50SUQ9ImdpbXA6ZG9jaWQ6Z2ltcDowZDE3NGJmOC1kMzhkLTQ3NTYtYWNiYS0yZGNhMjA1YTk4ZTEiCiAgIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6M2YzZGQzOTItYTVjNS00ZGFhLTg2YzQtMWZmM2RlYjhmMDBlIgogICB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6NjNlOWEzNGItM2MzYy00M2JhLWI0ODAtNGY5MmJlNjYwODI1IgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJXaW5kb3dzIgogICBHSU1QOlRpbWVTdGFtcD0iMTY1ODU1ODY2NDMyOTA2NiIKICAgR0lNUDpWZXJzaW9uPSIyLjEwLjIwIgogICBkYzpGb3JtYXQ9ImltYWdlL3BuZyIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8aXB0Y0V4dDpMb2NhdGlvbkNyZWF0ZWQ+CiAgICA8cmRmOkJhZy8+CiAgIDwvaXB0Y0V4dDpMb2NhdGlvbkNyZWF0ZWQ+CiAgIDxpcHRjRXh0OkxvY2F0aW9uU2hvd24+CiAgICA8cmRmOkJhZy8+CiAgIDwvaXB0Y0V4dDpMb2NhdGlvblNob3duPgogICA8aXB0Y0V4dDpBcnR3b3JrT3JPYmplY3Q+CiAgICA8cmRmOkJhZy8+CiAgIDwvaXB0Y0V4dDpBcnR3b3JrT3JPYmplY3Q+CiAgIDxpcHRjRXh0OlJlZ2lzdHJ5SWQ+CiAgICA8cmRmOkJhZy8+CiAgIDwvaXB0Y0V4dDpSZWdpc3RyeUlkPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpiZDkyMDQ0NS01ZGI0LTRjYmEtYjdhOS0zZWRmYTA5YzRhYjUiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoV2luZG93cykiCiAgICAgIHN0RXZ0OndoZW49IjIwMjItMDctMjNUMDg6NDQ6MjQiLz4KICAgIDwvcmRmOlNlcT4KICAgPC94bXBNTTpIaXN0b3J5PgogICA8cGx1czpJbWFnZVN1cHBsaWVyPgogICAgPHJkZjpTZXEvPgogICA8L3BsdXM6SW1hZ2VTdXBwbGllcj4KICAgPHBsdXM6SW1hZ2VDcmVhdG9yPgogICAgPHJkZjpTZXEvPgogICA8L3BsdXM6SW1hZ2VDcmVhdG9yPgogICA8cGx1czpDb3B5cmlnaHRPd25lcj4KICAgIDxyZGY6U2VxLz4KICAgPC9wbHVzOkNvcHlyaWdodE93bmVyPgogICA8cGx1czpMaWNlbnNvcj4KICAgIDxyZGY6U2VxLz4KICAgPC9wbHVzOkxpY2Vuc29yPgogIDwvcmRmOkRlc2NyaXB0aW9uPgogPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgIAo8P3hwYWNrZXQgZW5kPSJ3Ij8+zDWyhgAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAAOwwAADsMBx2+oZAAAAAd0SU1FB+YHFwYsGF33bkMAAAAxSURBVBjTY2SAAjMjo/8MWMCpc+cYGRgYGBjxKUJWzEhIEQwwMRAJhoJC4oOH2AAHAJkIEalX3y55AAAAAElFTkSuQmCC';
var IMGMarkerTest = 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjE3NSIgaGVpZ2h0PSIxNzUiPg0KCjxjaXJjbGUgY3g9Ijg1IiBjeT0iODUiIHI9IjYzIiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDdhYzciIHN0cm9rZS13aWR0aD0iNDQiLz4gIAo8L3N2Zz4=';


console.log('E2 Multitool by ExKcir added');



function OutputStorageAll() {

    //LocalStorage
    var values = [],
        keys = Object.keys(localStorage),
        i = keys.length;

    while ( i-- ) {
        values.push( localStorage.getItem(keys[i]) );
    }


    //SessionStorage
     var values2 = [],
        keys2 = Object.keys(sessionStorage),
        i2 = keys.length;

    while ( i2-- ) {
        values2.push( localStorage.getItem(keys2[i2]) );
    }


    Output(Object.keys(localStorage)); //Output Name localStorage
    Output(Object.keys(sessionStorage));//Output Name sessionStorage

    Output(values); //Output Value localStorage
    Output(values2); //Output Value sessionStorage
}


function Output (Data)
{
    var TmpDIV = document.createElement("div");
    TmpDIV.innerHTML = Data.replaceAll("<br>", "\n");
    console.log(TmpDIV.innerText); //Output to Console

     document.getElementById('ScriptTextOutput').innerHTML = document.getElementById('ScriptTextOutput').innerHTML + Data + "<br>"; //Output to Script
}

function ScrollOutput()
{
    var tmpDiv = document.getElementById("ScriptTextOutput");
    tmpDiv.scrollTop = tmpDiv.scrollHeight;
}

function ScriptIsWorking (IsWorking)
{
    if(IsWorking == 0)
    {
        TimetoWait = 500;
        TotalApiRequests = 0;

        document.getElementById('LoadingBox').style.backgroundColor = "green";
        document.getElementById('LoadingBox').innerHTML = "Script has finished";
    }
    else
    {
        document.getElementById('LoadingBox').style.backgroundColor = "red";


        switch(document.getElementById('LoadingBox').textContent)
        {
                case "Script is working....":
               document.getElementById('LoadingBox').innerHTML = "Script is working";
                break;

                case "Script is working...":
                document.getElementById('LoadingBox').innerHTML = "Script is working....";
                break;

                case "Script is working..":
                document.getElementById('LoadingBox').innerHTML = "Script is working...";
                break;

                 case "Script is working.":
                document.getElementById('LoadingBox').innerHTML = "Script is working..";
                break;

                case "Script is working":
                document.getElementById('LoadingBox').innerHTML = "Script is working.";
                break;

                case "Script is ready":
                document.getElementById('LoadingBox').innerHTML = "Script is working";
                break;

                case "Script has finished":
               document.getElementById('LoadingBox').innerHTML = "Script is working";
                break;
        }

    }
}

function ClearOutput ()
{
     document.getElementById('ScriptTextOutput').innerHTML = "";
}

 function timeout(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
}

async function GetAPIData(URL)
{

    TotalApiRequests++;

    if(TotalApiRequests == 50 || TotalApiRequests == 100)
    {
        TimetoWait = TimetoWait+500; //+500 ms
    }

    var IsSuccessful = 0;
    var APIData = null;

    while(IsSuccessful == 0)
    {
        ScriptIsWorking(1);
        try{
            APIData = await $.getJSON('https://app.earth2.io/api/v2/' + URL, {_: new Date().getTime()})
                .done(function() {
                IsSuccessful = 1;
            });
        }catch(error){
            //console.log(error);
            Output('<span style="display: inline-block; color: darkred; font-weight: bold">Error: ' + error.status + ' - Script waits now 2 minutes and then tries again!</span>');
            ScrollOutput();
            await timeout(120000);
        }

    }

   ScriptIsWorking(1);

    //Speed throttling
   if(localStorage.getItem('E2MultiTool_IsSpeedThrottlingActive') == 1)
   {
       console.log("Speed throttling: Wait " + TimetoWait + "ms");
       await timeout(TimetoWait);
   }

   return APIData;
}


async function GetRAPIData(URL)
{

    TotalApiRequests++;

    if(TotalApiRequests == 50 || TotalApiRequests == 100)
    {
        TimetoWait = TimetoWait+500; //+500 ms
    }

    var IsSuccessful = 0;
    var APIData = null;

    while(IsSuccessful == 0)
    {
        ScriptIsWorking(1);
        try{
            let response = await fetch("https://r.earth2.io/" + URL, {
                "headers": {
                    "accept": "application/json, text/plain, */*",
                    "accept-language": "de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7",
                    "if-none-match": "W/\"438bf420f0c924bf1d4785abddc1e1e6\"",
                    "sec-ch-ua": "\" Not A;Brand\";v=\"99\", \"Chromium\";v=\"98\", \"Google Chrome\";v=\"98\"",
                    "sec-ch-ua-mobile": "?0",
                    "sec-ch-ua-platform": "\"Windows\"",
                    "sec-fetch-dest": "empty",
                    "sec-fetch-mode": "cors",
                    "sec-fetch-site": "same-site",
                    "x-csrftoken": document.getElementsByName("csrfmiddlewaretoken")[0].value
                },
                "referrer": "https://app.earth2.io/",
                "referrerPolicy": "strict-origin-when-cross-origin",
                "method": "GET",
                "mode": "cors",
                "credentials": "include"
            });

            APIData = await response.json();
            IsSuccessful = 1 ;

            //console.log(data);
            ScriptIsWorking(1);

             }catch(error){
            IsSuccessful = 0;
            console.log(error);
            console.log('Error: ' + error.status + ' - Script waits now 2 minutes and then tries again!');
            //ScrollOutput();
            await timeout(120000);
        }

    }

   ScriptIsWorking(1);

    //Speed throttling
   if(localStorage.getItem('E2MultiTool_IsSpeedThrottlingActive') == 1)
   {
       console.log("Speed throttling: Wait " + TimetoWait + "ms");
       await timeout(TimetoWait);
   }

   return APIData;
}


async function RequestJewelsDataInventory()
{
    Output('Loading jewels from inventory.....');
   /* $.getJSON('https://app.earth2.io/api/v2/my/jewels/?expires__isnull=true&limit=5', function(data) {
        JewelsTotalInventory = data.count;
        //console.log(data.count);
    });*/

    var APIData = await GetAPIData("my/jewels/?expires__isnull=true&limit=5");
     return APIData.count;
    //console.log(APIData.count);

}


async function RequestJewelsDataBazar()
{
    Output('Loading jewels from bazar.....');

    var APIData = await GetAPIData("my/offers/?offset=0&ordering=-created&limit=5");
    return APIData.count;

}


//New generated jewels
async function RequestJewelsDataUnclaimed()
{
     Output('Loading unclaimed jewels.....');

    var APIData = await GetAPIData("my/jewels/?expires__isnull=false&limit=5");
    return APIData.count;
}


//Slotted jewels
async function RequestJewelsDataSlotted()
{
     Output('Loading slotted jewels.....');

    var TotalSlottedJewels = 0;


var j = 0;
do
{

     var APIData = await GetAPIData("my/mentars/?limit=100&offset=" + (j*100));
     //Output((j*100));




    //Load every mentar
    for(var i = 0; i<Object.keys(APIData.results).length; i++)
    {
        //console.log(Object.keys(APIData.results[i].slotted_jewel_set).length);
         ClearOutput();
        Output((j*100)+(i+1) + '. propery searched for slotted jewels');



        //Count jewel of mentar
        if (Object.keys(APIData.results[i].slotted_jewel_set).length != 0)
        {
            TotalSlottedJewels = TotalSlottedJewels + Object.keys(APIData.results[i].slotted_jewel_set).length ;
        }
    }

    j++;
}while(APIData.next != null)


    return TotalSlottedJewels;
}


async function DownloadDataAsCSV(Data)
{
    var d = new Date();

    var FileData = "";
    var FileName = "data_E2_" + d.getFullYear() + "-" + d.getMonth() + "-" + d.getDate() + ".csv";


    if (Data == "jewels") //Get data for jewels
    {
        //Filename
        FileName = "Jewels" + FileName;

        //Fieldnames
        FileData += "ID,NAME,COLOR,TIER,DATE_GENERATED,LOCATION,LOCATION_ID,LOCATION_LINK\n";


    }

    if (Data == "properties") //Get data for properties
    {
        FileName = "Properties" + FileName;


    }


    if (Data == "transactions") //Get data for transactions
    {
        FileName = "Transactions" + FileName;

    }




    var hiddenElement = document.createElement('a');
    hiddenElement.href = 'data:text/csv;charset=utf-8,' + encodeURI(FileData);
    hiddenElement.target = '_blank';

    hiddenElement.download = FileName;
    hiddenElement.click();



}


async function FeatureJewelData()
    {
        ClearOutput(); //Clear Text Output

        var JewelsTotal = 0;
        var JewelsTotalClaimed = 0;
        var JewelsTotalUnclaimed = 0;
        var JewelsTotalInventory = 0;
        //var JewelsTotalBazar = 0;
        var JewelsTotalSlotted = 0;
        var JewelsT1 = 0;
        var JewelsT2 = 0;


        //Count Jewels in Inventory
        JewelsTotalInventory = await RequestJewelsDataInventory();
        //console.log(JewelsTotalInventory);

        //Count Jewels in Bazar
       // JewelsTotalBazar = await RequestJewelsDataBazar();
        //console.log(JewelsTotalBazar);

        //Count Jewels unclaimed
        JewelsTotalUnclaimed = await RequestJewelsDataUnclaimed();

        //Count Jewels slotted
        JewelsTotalSlotted = await RequestJewelsDataSlotted();

       // JewelsTotalClaimed = JewelsTotalInventory + JewelsTotalBazar + JewelsTotalSlotted;
        JewelsTotalClaimed = JewelsTotalInventory + JewelsTotalSlotted;
        JewelsTotal = JewelsTotalClaimed + JewelsTotalUnclaimed ;



        document.getElementById('ScriptTextOutput').innerHTML =
        `


                         <b>Jewel counter:</b><br>
                         Jewels in inventory:  ` + JewelsTotalInventory + `<br>` +
                         //Jewels on bazar:  ` + JewelsTotalBazar + `<br>
                         `Jewels slotted: ` + JewelsTotalSlotted + `<br>
                         ---------------------------<br>
                         Claimed jewels total: ` + JewelsTotalClaimed + ` <br><br>



                         Unclaimed (new generated) jewels: ` + JewelsTotalUnclaimed + ` <br>

                        ---------------------------<br>
                        Jewels total: ` + JewelsTotal + `<br>`;

ScriptIsWorking(0);
 }


function FeatureJewelDataHelp()
{
    ClearOutput();
   // Output("Counts jewels in inventory and bazar, slotted and unclaimed");
    Output("Counts jewels in inventory, slotted and unclaimed");
}


async function FeatureJewelDataPlus()
    {

        var JewelsList = [];
        var JewelsListTotal = [];

        var JewelsTotalInInventory = 0;
        var JewelsTotalSlotted = 0;
        //var JewelsTotalOnBazar = 0;


        // ----------- Ceck Inventory -----------


        var APIData = await GetAPIData("my/jewels/?stacked=true");
        //Output((j*100));


        //Load every jewel from inventory
        for(var i = 0; i<APIData.length; i++)
        {
            JewelsList.push({Name: "T" + APIData[i].tier + " " + APIData[i].color_name + " (" + APIData[i].quality_level + ")", Count: APIData[i].count});
            JewelsTotalInInventory += APIData[i].count;
        }

        ClearOutput();
        Output("<b>Jewels counter + list</b><br>");
        Output("<b>Inventory:</b>");


       // Output(JewelsList.join(""));
        JewelsList.forEach(function(element) {
            // check code for this type of jewel
           Output(element.Name + ": " + element.Count + "x");
        });


        Output("---------------------------------");
        Output("Jewels total in inventory: " + JewelsTotalInInventory);
        Output("<br>");
        ScrollOutput();

        JewelsListTotal = JewelsList;
        JewelsList = [];


        // ----------- Check slotted jewels -----------


        var j = 0;
        do
        {

            APIData = await GetAPIData("my/mentars/?limit=100&offset=" + (j*100));
            //Output((j*100));


            //Load every mentar
            for(var k = 0; k<Object.keys(APIData.results).length; k++)
            {



                //Get jewels of mentar
                if (Object.keys(APIData.results[k].slotted_jewel_set).length != 0)
                {
                    //Load every jewel from property
                    for(var l = 0; l<Object.keys(APIData.results[k].slotted_jewel_set).length; l++)
                    {
                        var FoundIt = 0;
                        JewelsList.forEach(function(element) {
                            // check code for this type of jewel
                            if(element.Name == "T" + APIData.results[k].slotted_jewel_set[l].tier + " " + APIData.results[k].slotted_jewel_set[l].color_name + " (" + APIData.results[k].slotted_jewel_set[l].quality_level + ")")
                            {
                                FoundIt = 1;
                                element.Count++;
                                JewelsTotalSlotted++;
                            }
                        });

                        if(FoundIt == 0)
                        {
                            JewelsList.push({Name: "T" + APIData.results[k].slotted_jewel_set[l].tier + " " + APIData.results[k].slotted_jewel_set[l].color_name + " (" + APIData.results[k].slotted_jewel_set[l].quality_level + ")", Count: 1});
                            JewelsTotalSlotted++;
                        }
                    }
                }
            }

            j++;
        }while(APIData.next != null)


        Output("<b>Slotted:</b>");
        //Output(JewelsList.join(""));
        JewelsList.forEach(function(element) {
            // check code for this type of jewel
           Output(element.Name + ": " + element.Count + "x");
        });
        Output("---------------------------------");
        Output("Jewels total slotted: " + JewelsTotalSlotted);
        Output("<br>");
        ScrollOutput();


        JewelsList.forEach(function (element2) {
            FoundIt = 0;
            ScriptIsWorking(1);
             JewelsListTotal.forEach(function(element) {
                 // check code for this type of jewel
                 if(element.Name == element2.Name)
                 {
                     element.Count += element2.Count;
                     FoundIt = 1;
                 }
             });

            if(FoundIt == 0)
            {
                JewelsListTotal.push({Name: element2.Name , Count: element2.Count});
            }
        });
        JewelsList = [];




        // ----------- Check jewels on bazar-----------
        /*


        j = 0;
        do
        {

            APIData = await GetAPIData("my/offers/?offset=0&ordering=-created&limit=100&offset=" + (j*100));
            //Output((j*100));



            //Load every jewel
            for(l = 0; l<Object.keys(APIData.results).length; l++)
            {
                FoundIt = 0;
                JewelsList.forEach(function(element) {
                    // check code for this type of jewel
                    if(element.Name == "T" + APIData.results[l].jewel.tier + " " + APIData.results[l].jewel.color_name + " (" + APIData.results[l].jewel.quality_level + ")")
                    {
                        FoundIt = 1;
                        element.Count++;
                        JewelsTotalOnBazar++;
                    }
                });

                if(FoundIt == 0)
                {
                    JewelsList.push({Name: "T" + APIData.results[l].jewel.tier + " " + APIData.results[l].jewel.color_name + " (" + APIData.results[l].jewel.quality_level + ")", Count: 1});
                    JewelsTotalOnBazar++;
                }
            }


            j++;
        }while(APIData.next != null)



        Output("<b>On Bazar:</b>");
        //Output(JewelsList.join(""));
        JewelsList.forEach(function(element) {
            // check code for this type of jewel
           Output(element.Name + ": " + element.Count + "x");
        });
        Output("---------------------------------");
        Output("Jewels total on bazar: " + JewelsTotalOnBazar);
        Output("<br>");
        ScrollOutput();


        JewelsList.forEach(function (element2) {
            FoundIt = 0;
            ScriptIsWorking(1);
            JewelsListTotal.forEach(function(element) {
                // check code for this type of jewel
                if(element.Name == element2.Name)
                {
                    element.Count += element2.Count;
                    FoundIt = 1;
                }
            });

            if(FoundIt == 0)
            {
                JewelsListTotal.push({Name: element2.Name , Count: element2.Count});
            }
        });
        JewelsList = [];



*/



        //Output("<b>Total Inventory + Slotted + Bazar:</b>");
        Output("<b>Total Inventory + Slotted:</b>");
        //Output(JewelsListTotal.join(""));
        JewelsListTotal.forEach(function(element) {
            // check code for this type of jewel
           Output(element.Name + ": " + element.Count + "x");
        });
        Output("---------------------------------");
        //Output("Jewels total: " + (JewelsTotalInInventory + JewelsTotalSlotted + JewelsTotalOnBazar));
        Output("Jewels total: " + (JewelsTotalInInventory + JewelsTotalSlotted));

        ScrollOutput();
        ScriptIsWorking(0); 
    }


function FeatureJewelDataPlusHelp()
{
    ClearOutput();
    //Output("br><br>Counts jewels in inventory, bazar, slotted and shows a list of jewels");
    Output("br><br>Counts jewels in inventory and slotted and shows a list of jewels");
}



//To do: Rewrite jewel price functions with a shorter function

async function FeatureJewelPricesT1()
    {
        ClearOutput(); //Clear Text Output

        var OutputString = "";

        //T1 Black
        Output('Find price data for T1 black jewels.....');
        var APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=BLACK&jewel__tier=1&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T1 Black:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;" ;

        //T1 Ochre
        Output('Find price data for T1 ochre jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=OCHRE&jewel__tier=1&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T1 Ochre:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "<br>";

         //T1 Grey
        Output('Find price data for T1 grey jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=GREY&jewel__tier=1&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T1 Grey:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T1 Blue
        Output('Find price data for T1 blue jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=BLUE&jewel__tier=1&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T1 Blue:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "<br>";

        //T1 Green
        Output('Find price data for T1 green jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=GREEN&jewel__tier=1&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T1 Green:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T1 Sandy
        Output('Find price data for T1 sandy jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=SANDY&jewel__tier=1&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T1 Sandy:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "<br>";

        //T1 Yellow
        Output('Find price data for T1 yellow jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=YELLOW&jewel__tier=1&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T1 Yellow:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T1 Anthracite
        Output('Find price data for T1 anthracite jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=ANTHRACITE&jewel__tier=1&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T1 Anthracite:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price;

        ClearOutput();
        Output(OutputString);
        ScriptIsWorking(0);
    }

function FeatureJewelPricesT1Help()
{
    ClearOutput();
    Output("Shows the price,fee and the full price (price+fee) of the cheapest jewels on the bazar (Only T1 jewels)");
}



async function FeatureJewelPricesT2()
    {
        ClearOutput(); //Clear Text Output

        var OutputString = "";

        //T2 Black
        Output('Find price data for T2 black jewels.....');
        var APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=BLACK&jewel__tier=2&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T2 Black:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;" ;

        //T2 Ochre
        Output('Find price data for T2 ochre jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=OCHRE&jewel__tier=2&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T2 Ochre:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "<br>";

         //T2 Grey
        Output('Find price data for T2 grey jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=GREY&jewel__tier=2&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T2 Grey:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T2 Blue
        Output('Find price data for T2 blue jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=BLUE&jewel__tier=2&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T2 Blue:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "<br>";

        //T2 Green
        Output('Find price data for T2 green jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=GREEN&jewel__tier=2&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T2 Green:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T2 Sandy
        Output('Find price data for T2 sandy jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=SANDY&jewel__tier=2&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T2 Sandy:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "<br>";

        //T2 Yellow
        Output('Find price data for T2 yellow jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=YELLOW&jewel__tier=2&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T2 Yellow:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T2 Anthracite
        Output('Find price data for T2 anthracite jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=ANTHRACITE&jewel__tier=2&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T2 Anthracite:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price+ "<br><br>";


        //T2 Jamaica
        Output('Find price data for T2 jamaica jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=JAMAICA&jewel__tier=2&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T2 Jamaica:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T2 Sunrise
        Output('Find price data for T2 sunrise jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=SUNRISE&jewel__tier=2&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T2 Sunrise:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price+ "<br>";

        //T2 Sunset
        Output('Find price data for T2 sunset jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=SUNSET&jewel__tier=2&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T2 Sunset:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T2 Purple
        Output('Find price data for T2 sunrise jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=PURPLE&jewel__tier=2&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T2 Purple:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price+ "<br>";

        //T2 Orange
        Output('Find price data for T2 orange jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=ORANGE&jewel__tier=2&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T2 Orange:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        ClearOutput();
        Output(OutputString);
        ScriptIsWorking(0);
    }

function FeatureJewelPricesT2Help()
{
    ClearOutput();
    Output("Shows the price,fee and the full price (price+fee) of the cheapest jewels on the bazar (Only T2 jewels)");
}


async function FeatureJewelPricesT3()
    {
        ClearOutput(); //Clear Text Output

        var OutputString = "";

        //T3 Black
        Output('Find price data for T3 black jewels.....');
        var APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=BLACK&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Black:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;" ;

        //T3 Ochre
        Output('Find price data for T3 ochre jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=OCHRE&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Ochre:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "<br>";

         //T3 Grey
        Output('Find price data for T3 grey jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=GREY&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Grey:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T3 Blue
        Output('Find price data for T3 blue jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=BLUE&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Blue:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "<br>";

        //T3 Green
        Output('Find price data for T3 green jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=GREEN&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Green:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T3 Sandy
        Output('Find price data for T3 sandy jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=SANDY&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Sandy:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "<br>";

        //T3 Yellow
        Output('Find price data for T3 yellow jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=YELLOW&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Yellow:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T3 Anthracite
        Output('Find price data for T3 anthracite jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=ANTHRACITE&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Anthracite:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price+ "<br><br>";


        //T3 Purple
        Output('Find price data for T3 purple jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=PURPLE&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Purple:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price+ "<br>";

        //T3 Orange
        Output('Find price data for T3 orange jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=ORANGE&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Orange:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";



        //T3 Amber
        Output('Find price data for T3 jamaica jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=AMBER&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Amber:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T3 Andalusite
        Output('Find price data for T3 andalusite jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=ANDALUSITE&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Andalusite:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price+ "<br>";

        //T3 Aquamarine
        Output('Find price data for T3 Aquamarine jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=AQUAMARINE&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Aquamarine:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T3 Azurite
        Output('Find price data for T3 azurite jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=AZURITE&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Azurite:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price+ "<br>";

        //T3 Bloodstone
        Output('Find price data for T3 bloodstone jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=BLOODSTONE&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Bloodstone:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T3 Catseye
        Output('Find price data for T3 catseye jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=CATSEYE&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Catseye:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price+ "<br>";

        //T3 Chrysocolla
        Output('Find price data for T3 chrysocolla jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=CHRYSOCOLLA&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Chrysocolla:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T3 Emerald
        Output('Find price data for T3 emerald jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=EMERALD&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Emerald:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price+ "<br>";

        //T3 Garnet
        Output('Find price data for T3 garnet jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=GARNET&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Garnet:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T3 Jade
        Output('Find price data for T3 jade jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=JADE&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Jade:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price+ "<br>";

        //T3 Malachite
        Output('Find price data for T3 malachite jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=MALACHITE&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Malachite:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T3 Obsidian
        Output('Find price data for T3 obsidian jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=OBSIDIAN&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Obsidian:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price+ "<br>";

        //T3 Opal
        Output('Find price data for T3 opal jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=OPAL&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Opal:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T3 Prehnite
        Output('Find price data for T3 prehnite jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=PREHNITE&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Prehnite:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price+ "<br>";

        //T3 Peridot
        Output('Find price data for T3 peridot jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=PERIDOT&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Peridot:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T3 Pyrite
        Output('Find price data for T3 pyrite jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=PYRITE&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Pyrite:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price+ "<br>";

        //T3 Ruby
        Output('Find price data for T3 ruby jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=RUBY&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Ruby:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T3 Serpentine
        Output('Find price data for T3 serpentine jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=SERPENTINE&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Serpentine:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price+ "<br>";

        //T3 Slate
        Output('Find price data for T3 slate jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=SLATE&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Slate:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T3 Sodalite
        Output('Find price data for T3 sodalite jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=SODALITE&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Sodalite:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price+ "<br>";

        //T3 Spinel
        Output('Find price data for T3 spinel jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=SPINEL&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Spinel:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T3 Sunstone
        Output('Find price data for T3 sunstone jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=SUNSTONE&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Sunstone:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price+ "<br>";

        //T3 Tigereye
        Output('Find price data for T3 tigereye jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=TIGEREYE&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Tigereye:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T3 Topaz
        Output('Find price data for T3 topaz jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=TOPAZ&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Topaz:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price+ "<br>";

        //T3 Turquoise
        Output('Find price data for T3 turquoise jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=TURQUOISE&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Turquoise:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T3 Titanite
        Output('Find price data for T3 titanite jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=TITANITE&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Titanite:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price+ "<br>";

        //T3 Tanzanite
        Output('Find price data for T3 tanzanite jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=TANZANITE&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Tanzanite:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T3 Zircon
        Output('Find price data for T3 zircon jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=ZIRCON&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Zircon:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price;

        ClearOutput();
        Output(OutputString);
        ScriptIsWorking(0);
    }

function FeatureJewelPricesT3Help()
{
    ClearOutput();
    Output("Shows the price,fee and the full price (price+fee) of the cheapest jewels on the bazar (Only T3 jewels)");
}




async function FeatureJewelPricesAll()
    {
        ClearOutput(); //Clear Text Output

        var OutputString = "";


         //T1 Black
        Output('Find price data for T1 black jewels.....');
        var APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=BLACK&jewel__tier=1&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T1 Black:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;" ;

        //T1 Ochre
        Output('Find price data for T1 ochre jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=OCHRE&jewel__tier=1&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T1 Ochre:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "<br>";

         //T1 Grey
        Output('Find price data for T1 grey jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=GREY&jewel__tier=1&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T1 Grey:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T1 Blue
        Output('Find price data for T1 blue jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=BLUE&jewel__tier=1&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T1 Blue:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "<br>";

        //T1 Green
        Output('Find price data for T1 green jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=GREEN&jewel__tier=1&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T1 Green:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T1 Sandy
        Output('Find price data for T1 sandy jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=SANDY&jewel__tier=1&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T1 Sandy:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "<br>";

        //T1 Yellow
        Output('Find price data for T1 yellow jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=YELLOW&jewel__tier=1&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T1 Yellow:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T1 Anthracite
        Output('Find price data for T1 anthracite jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=ANTHRACITE&jewel__tier=1&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T1 Anthracite:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "<br><br>";



        //T2 Black
        Output('Find price data for T2 black jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=BLACK&jewel__tier=2&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T2 Black:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;" ;

        //T2 Ochre
        Output('Find price data for T2 ochre jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=OCHRE&jewel__tier=2&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T2 Ochre:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "<br>";

         //T2 Grey
        Output('Find price data for T2 grey jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=GREY&jewel__tier=2&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T2 Grey:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T2 Blue
        Output('Find price data for T2 blue jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=BLUE&jewel__tier=2&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T2 Blue:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "<br>";

        //T2 Green
        Output('Find price data for T2 green jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=GREEN&jewel__tier=2&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T2 Green:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T2 Sandy
        Output('Find price data for T2 sandy jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=SANDY&jewel__tier=2&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T2 Sandy:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "<br>";

        //T2 Yellow
        Output('Find price data for T2 yellow jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=YELLOW&jewel__tier=2&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T2 Yellow:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T2 Anthracite
        Output('Find price data for T2 anthracite jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=ANTHRACITE&jewel__tier=2&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T2 Anthracite:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price+ "<br>";


        //T2 Jamaica
        Output('Find price data for T2 jamaica jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=JAMAICA&jewel__tier=2&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T2 Jamaica:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T2 Sunrise
        Output('Find price data for T2 sunrise jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=SUNRISE&jewel__tier=2&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T2 Sunrise:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price+ "<br>";

        //T2 Sunset
        Output('Find price data for T2 sunset jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=SUNSET&jewel__tier=2&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T2 Sunset:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T2 Purple
        Output('Find price data for T2 sunrise jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=PURPLE&jewel__tier=2&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T2 Purple:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price+ "<br>";

        //T2 Orange
        Output('Find price data for T2 orange jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=ORANGE&jewel__tier=2&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T2 Orange:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "<br><br>";




        //T3 Black
        Output('Find price data for T3 black jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=BLACK&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Black:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;" ;

        //T3 Ochre
        Output('Find price data for T3 ochre jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=OCHRE&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Ochre:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "<br>";

         //T3 Grey
        Output('Find price data for T3 grey jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=GREY&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Grey:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T3 Blue
        Output('Find price data for T3 blue jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=BLUE&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Blue:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "<br>";

        //T3 Green
        Output('Find price data for T3 green jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=GREEN&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Green:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T3 Sandy
        Output('Find price data for T3 sandy jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=SANDY&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Sandy:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "<br>";

        //T3 Yellow
        Output('Find price data for T3 yellow jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=YELLOW&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Yellow:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T3 Anthracite
        Output('Find price data for T3 anthracite jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=ANTHRACITE&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Anthracite:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price+ "<br>";


        //T3 Purple
        Output('Find price data for T3 purple jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=PURPLE&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Purple:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price+ "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T3 Orange
        Output('Find price data for T3 orange jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=ORANGE&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Orange:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "<br>";



        //T3 Amber
        Output('Find price data for T3 jamaica jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=AMBER&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Amber:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T3 Andalusite
        Output('Find price data for T3 andalusite jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=ANDALUSITE&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Andalusite:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price+ "<br>";

        //T3 Aquamarine
        Output('Find price data for T3 Aquamarine jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=AQUAMARINE&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Aquamarine:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T3 Azurite
        Output('Find price data for T3 azurite jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=AZURITE&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Azurite:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price+ "<br>";

        //T3 Bloodstone
        Output('Find price data for T3 bloodstone jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=BLOODSTONE&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Bloodstone:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T3 Catseye
        Output('Find price data for T3 catseye jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=CATSEYE&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Catseye:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price+ "<br>";

        //T3 Chrysocolla
        Output('Find price data for T3 chrysocolla jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=CHRYSOCOLLA&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Chrysocolla:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T3 Emerald
        Output('Find price data for T3 emerald jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=EMERALD&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Emerald:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price+ "<br>";

        //T3 Garnet
        Output('Find price data for T3 garnet jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=GARNET&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Garnet:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T3 Jade
        Output('Find price data for T3 jade jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=JADE&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Jade:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price+ "<br>";

        //T3 Malachite
        Output('Find price data for T3 malachite jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=MALACHITE&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Malachite:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T3 Obsidian
        Output('Find price data for T3 obsidian jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=OBSIDIAN&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Obsidian:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price+ "<br>";

        //T3 Opal
        Output('Find price data for T3 opal jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=OPAL&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Opal:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T3 Prehnite
        Output('Find price data for T3 prehnite jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=PREHNITE&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Prehnite:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price+ "<br>";

        //T3 Peridot
        Output('Find price data for T3 peridot jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=PERIDOT&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Peridot:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T3 Pyrite
        console.log('Find price data for T3 pyrite jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=PYRITE&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Pyrite:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price+ "<br>";

        //T3 Ruby
        Output('Find price data for T3 ruby jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=RUBY&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Ruby:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T3 Serpentine
        Output('Find price data for T3 serpentine jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=SERPENTINE&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Serpentine:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price+ "<br>";

        //T3 Slate
        Output('Find price data for T3 slate jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=SLATE&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Slate:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T3 Sodalite
        Output('Find price data for T3 sodalite jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=SODALITE&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Sodalite:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price+ "<br>";

        //T3 Spinel
        Output('Find price data for T3 spinel jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=SPINEL&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Spinel:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T3 Sunstone
        Output('Find price data for T3 sunstone jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=SUNSTONE&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Sunstone:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price+ "<br>";

        //T3 Tigereye
        Output('Find price data for T3 tigereye jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=TIGEREYE&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Tigereye:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T3 Topaz
        Output('Find price data for T3 topaz jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=TOPAZ&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Topaz:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price+ "<br>";

        //T3 Turquoise
        Output('Find price data for T3 turquoise jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=TURQUOISE&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Turquoise:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T3 Titanite
        Output('Find price data for T3 titanite jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=TITANITE&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Titanite:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price+ "<br>";

        //T3 Tanzanite
        Output('Find price data for T3 tanzanite jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=TANZANITE&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Tanzanite:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T3 Zircon
        Output('Find price data for T3 zircon jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__color_name=ZIRCON&jewel__tier=3&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T3 Zircon:</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price;

        ClearOutput();
        Output(OutputString);
        ScriptIsWorking(0);
    }

function FeatureJewelPricesAllHelp()
{
    ClearOutput();
    Output("Shows the price,fee and the full price (price+fee) of the cheapest jewels on the bazar (All jewels T1-T3)");
}





async function FeatureJewelHarvestHelper()
{


var JuwelenGesamt = 0;
var JuwelenT1 = 0;
var JuwelenT2 = 0;

var JewelsFromT1Single = 0;
var JewelsFromT2Single = 0;

ClearOutput();


//Get all jewels

var j = 0;
do
{

     var APIData = await GetAPIData("my/jewels/?expires__isnull=false&limit=10&ordering=created&offset=" + (j*10));
     //Output((j*100));

    JuwelenGesamt = JuwelenGesamt + (Object.keys(APIData.results).length);


    //Load every jewel of page
    for(var i = 0; i<Object.keys(APIData.results).length; i++)
    {
        //console.log(Object.keys(APIData.results[i].slotted_jewel_set).length);
        // ClearOutput();
        Output((j*10)+(i+1) + '. jewel analyzed');
        ScrollOutput();

        var APIData2 = await GetAPIData("my/landfields/" + APIData.results[i].landfield.id);

        //Check if T1 or T2
        if(APIData2.landfield_tier == 2)
        {
            JuwelenT2++;
            Output('Jewel from T2 property recognized');


            if(Object.keys(APIData2.tile_indexes).length == "1")
            {
                JewelsFromT2Single++;
                Output('T2 single tile recognized');
            }
        }
        else
        {
            JuwelenT1++;
            Output('Jewel from T1 property recognized');


            if(Object.keys(APIData2.tile_indexes).length == "1")
            {
                JewelsFromT1Single++;
                Output('T1 single tile recognized');
            }
        }

    }

    j++;
}while(APIData.next != null)


ClearOutput();
Output(`
                        <b>Jewel harvest helper:</b><br>
                        Jewels from T1: ` + JuwelenT1 + ` (` + JewelsFromT1Single + ` from single tiles) <br>
                        Jewels from T2: ` + JuwelenT2 + ` (` + JewelsFromT2Single + ` from single tiles) <br>
                        ---------------------------<br>
                        Jewels total: ` + JuwelenGesamt);

    ScriptIsWorking(0);
}



function FeatureJewelHarvestHelperHelp()
{
    ClearOutput();
    Output("Counts the amount of jewels generated from T1 and T2 properties and how many came from a single tile property.");
}



async function FeatureGetHolobuildingsData()
{


var VolumeTotal = 0;
var VertexTotal = 0;
var HolosTotal = 0;
var HoloOnT1 = 0;
var HoloOnT2 = 0;





var j = 0;
do
{
     var APIData = await GetAPIData("my/holobuildings/?limit=20&offset=" + (j*20));
     //Output((j*100));

    //Count Holobuildings
    HolosTotal = HolosTotal + (Object.keys(APIData.results).length);


    //Load every holo of page
    for(var i = 0; i<Object.keys(APIData.results).length; i++)
    {
        //console.log(Object.keys(APIData.results[i].slotted_jewel_set).length);
         ClearOutput();
        Output((j*20)+(i+1) + '. holobuilding analyzed');

        var APIData2 = await GetAPIData("my/landfields/" + APIData.results[i].landfield_id);

        //Check if T1 or T2
        if(APIData2.landfield_tier == 2)
        {
            HoloOnT2++;
            Output('Holobuilding on T2 property recognized');
        }
        else
        {
            HoloOnT1++;
            Output('Holobuilding on T1 property recognized');
        }


        //Get Volume/Holospace
        VolumeTotal = VolumeTotal + parseFloat(APIData.results[i].total_volume);

        //Get Vertex Count
        VertexTotal = VertexTotal + APIData.results[i].total_vertex_count ;
    }

    j++;

}while(APIData.next != null)


ClearOutput();
Output(`
                        <b>Holobuildings data:</b><br>
                        Holobuildings on T1: ` + HoloOnT1 + ` <br>
                        Holobuildings on T2: ` + HoloOnT2 + ` <br>
                        ---------------------------<br>
                        Holobuildings total: ` + HolosTotal + ` <br>
                        <br>
                        <br>
                        Holobuildings total space/volume: ` + VolumeTotal.toFixed(2) + `m3 <br>
                        Holobuildings total vertex count: ` + VertexTotal);

    ScriptIsWorking(0);
}




function FeatureGetHolobuildingsDataHelp()
{
    ClearOutput();
    Output("Counts the amount of holobuildings, the amount of holobuildings on T1 or T2 properties, the amount of holospace(volume in m3) and the total vertex count");
}


async function FeatureHolobuildingsList()
{

ClearOutput();
var HolosTotal = 0;

    Output(' <b>Holobuildings data:</b>');

var j = 0;
do
{
     var APIData = await GetAPIData("my/holobuildings/?limit=20&offset=" + (j*20));
     //Output((j*100));



    //Load every holo of page
    for(var i = 0; i<Object.keys(APIData.results).length; i++)
    {

        HolosTotal++;
        var APIData2 = await GetAPIData("my/landfields/" + APIData.results[i].landfield_id);



        Output('<span style="display: inline-block; width: 20%;">' + HolosTotal + '. HB "' + APIData.results[i].name + '" on: </span><span style="display: inline-block; width: 50%;"> <a style="color: darkblue" href="https://app.earth2.io/#propertyInfo/' + APIData2.id + '">' + APIData2.description + '</a> (T' + APIData2.landfield_tier + ';C' + APIData2.tile_class + ';' + APIData2.tile_indexes.length +' tiles) </span> &nbsp; &nbsp; &nbsp;' + APIData.results[i].total_volume + ' m3');


    }

    j++;

}while(APIData.next != null)


    ScriptIsWorking(0);
}




function FeatureHolobuildingsListHelp()
{
    ClearOutput();
    Output("Shows a list of Holobuildings");
}




async function FeaturePropertiesCounter()
{


var PropertiesTotal = 0;
var PropertiesTotalT1 = 0;
var PropertiesTotalT1C1 = 0;
var PropertiesTotalT1C2 = 0;
var PropertiesTotalT1C3 = 0;

var PropertiesTotalT2 = 0;


var TilesTotal = 0;
var TilesTotalT1 = 0;
var TilesTotalT1C1 = 0;
var TilesTotalT1C2 = 0;
var TilesTotalT1C3 = 0;

var TilesTotalT2 = 0;



//Get all jewels

var j = 0;
do
{

     var APIData = await GetAPIData("my/landfields/?limit=20&offset=" + (j*20));


    //Count total properties
    PropertiesTotal = PropertiesTotal + (Object.keys(APIData.results).length);

    //Load every property of page
    for(var i = 0; i<Object.keys(APIData.results).length; i++)
    {

         ClearOutput();
        Output((j*20)+(i+1) + '. property analyzed');

       //Count total tiles
        TilesTotal = TilesTotal + Object.keys(APIData.results[i].tile_indexes).length;

        //Check if T1 or T2
        if(APIData.results[i].landfield_tier == 2)
        {
            //T2 property
            PropertiesTotalT2++;
            TilesTotalT2 = TilesTotalT2 + Object.keys(APIData.results[i].tile_indexes).length;
            Output('T2 property recognized');



        }
        else
        {
            //T1 property
            PropertiesTotalT1++;
            TilesTotalT1 = TilesTotalT1 + Object.keys(APIData.results[i].tile_indexes).length;
            Output('T1 property recognized');


             if(APIData.results[i].tile_class == 1)
            {
                //class 1 property
                PropertiesTotalT1C1++;
                TilesTotalT1C1 = TilesTotalT1C1 + Object.keys(APIData.results[i].tile_indexes).length;
            }

             if(APIData.results[i].tile_class == 2)
            {
                //class 2 property
                PropertiesTotalT1C2++;
                TilesTotalT1C2 = TilesTotalT1C2 + Object.keys(APIData.results[i].tile_indexes).length;
            }
            if(APIData.results[i].tile_class == 3)
            {
                //class 3 property
                PropertiesTotalT1C3++;
                TilesTotalT1C3 = TilesTotalT1C3 + Object.keys(APIData.results[i].tile_indexes).length;
            }


        }

    }

    j++;
}while(APIData.next != null)


ClearOutput();
Output(`
                        <b>Properties counter:</b><br>
                        T1 Properties: C1: ` + PropertiesTotalT1C1 + ` <br>
                        T1 Properties: C2: ` + PropertiesTotalT1C2 + ` <br>
                        T1 Properties: C3: ` + PropertiesTotalT1C3 + ` <br>
                        ---------------------------<br>
                        T1 Properties total: ` + PropertiesTotalT1 + ` <br>
                        T2 Properties total: ` + PropertiesTotalT2 + ` <br>
                        <br>
                        T1 Tiles: C1: ` + TilesTotalT1C1 + ` <br>
                        T1 Tiles: C2: ` + TilesTotalT1C2 + ` <br>
                        T1 Tiles: C3: ` + TilesTotalT1C3 + ` <br>
                        ---------------------------<br>
                        T1 Tiles total: ` + TilesTotalT1 + ` <br>
                        T2 Tiles total: ` + TilesTotalT2 + ` <br>`);

    ScriptIsWorking(0);
}




function FeaturePropertiesCounterHelp()
{
    ClearOutput();
    Output("Counts the amount of: <br> - T1 class 1 properties <br> - T1 class 2 properties <br> - T1 class 3 properties <br> - T1 total properties <br> - T2 total properties <br> <br> - T1 class 1 tiles <br> - T1 class 2 tiles <br> - T1 class 3 tiles <br> - T1 total tiles <br> - T2 total tiles <br>");
}


async function FeaturePropertiesList()
{


var ListofTileSizesT1 = [];
var ListofTileSizesT1Count = [];
var ListofTileSizesT2 = [];
var ListofTileSizesT2Count = [];
var FountIt = 0;


var j = 0;
do
{

 var APIData = await GetAPIData("my/landfields/?limit=20&sort=size&offset=" + (j*20));


    //Load every property of page
    for(var i = 0; i<Object.keys(APIData.results).length; i++)
    {
         ClearOutput();
        Output((j*20)+(i+1) + '. property analyzed');


        //Check if T1 or T2
        if(APIData.results[i].landfield_tier == 2)
        {
            //T2 property
            //Check if already in list
            for(var n = 0;n < ListofTileSizesT2.length;n++)
            {
                if(ListofTileSizesT2[n] == Object.keys(APIData.results[i].tile_indexes).length)
                   {
                       //Found it in list
                       FountIt = 1;
                       ListofTileSizesT2Count[n]++;
                   }
            }

            if(FountIt == 0)
            {
                ListofTileSizesT2[ListofTileSizesT2.length] = Object.keys(APIData.results[i].tile_indexes).length;
                ListofTileSizesT2Count[(ListofTileSizesT2.length-1)]  = 1;
            }
            else
            {
                FountIt = 0;
            }

        }
        else
        {
            //T1 property
            //Check if already in list
            for(var k = 0;k < ListofTileSizesT1.length;k++)
            {
                if(ListofTileSizesT1[k] == Object.keys(APIData.results[i].tile_indexes).length)
                   {
                       //Found it in list
                       FountIt = 1;
                       ListofTileSizesT1Count[k]++;
                   }
            }

            if(FountIt == 0)
            {
                ListofTileSizesT1[ListofTileSizesT1.length] = Object.keys(APIData.results[i].tile_indexes).length;
                ListofTileSizesT1Count[(ListofTileSizesT1.length-1)]  = 1;
            }
            else
            {
                FountIt = 0;
            }

       }

    }

    j++;
}while(APIData.next != null)


     // map to dict
    var listOfT1Props = ListofTileSizesT1.map((x, i) => ({ x, count: ListofTileSizesT1Count[i] }));
    var listOfT2Props = ListofTileSizesT2.map((x, i) => ({ x, count: ListofTileSizesT2Count[i] }));

    // order dict
    listOfT1Props = listOfT1Props.sort((a, b) => a.x > b.x ? 1 : -1);
    listOfT2Props = listOfT2Props.sort((a, b) => a.x > b.x ? 1 : -1);


    //Output T1
    ClearOutput();
    Output(`
                        <b>Properties sizes counter:</b><br>
            `);

    for(var l = 0;l < listOfT1Props.length;l++)
    {
         Output(listOfT1Props[l].x + "-tile T1 properties: " + listOfT1Props[l].count + "x");
    }

    Output("<br>");

    for(var m = 0;m < listOfT2Props.length;m++)
    {
             Output(listOfT2Props[m].x + "-tile T2 properties: " + listOfT2Props[m].count + "x");
    }

ScriptIsWorking(0);
}


function FeaturePropertiesListHelp()
{
    ClearOutput();
    Output("Creates a list of (T1 and T2) properties sizes");
}


async function FeatureProfitCalc()
{


var TotalProfit = 0;
var SalesTotal = 0;
var CountProfitCalcSuccessful = 0;
var ErrorTransactionsList = "";
var ErrorCount = 0;

ClearOutput();



        var k = 0;
        do
        {
            //Get every purchase ; 100
            var APIData2 = await GetAPIData("my/balance_changes/?balance_change_type=PURCHASE&limit=100&offset=" + (k*100));


            var j = 0;
            do
            {

                //Get every sale; 100
                var APIData = await GetAPIData("my/balance_changes/?balance_change_type=SALE&limit=100&offset=" + (j*100));

                //Load every property of purchase page
                for(var l = 0; l<Object.keys(APIData2.results).length; l++)
                {
                    //console.log(l);
                    //Output((j*11)+(i+1) + '. property sale analyzed');

                    //Load every property of sale page
                    for(var i = 0; i<Object.keys(APIData.results).length; i++)
                    {

                        //Bugfix:
                        if(APIData.results[i].linked_object == null || APIData2.results[l].linked_object == null )
                        {
                            if(APIData.results[i].linked_object == null)
                            {
                                Output("Error 1: Property #" +(i+1));
                                ErrorCount++;
                                ErrorTransactionsList += '<span style="display: inline-block; color: darkred; font-weight: bold">Error 1: Page: #' + (i+j) + ' Property #' + (j*100+(i+1)) + '</span><br>';

                            }

                            if(APIData2.results[l].linked_object == null)
                            {
                                Output("Error 2: Property #" +(i+1));
                                ErrorCount++;
                                ErrorTransactionsList += '<span style="display: inline-block; color: darkred; font-weight: bold">Error 2: Page: #' + (i+j) + ' Property #' + (j*100+(i+1)) + '</span><br>';

                            }
                        }// Ende Bugfix
                        else
                        {
                            if(APIData.results[i].linked_object.id == APIData2.results[l].linked_object.id)
                            {

                                CountProfitCalcSuccessful++;
                                Output('Property: <b>' + APIData2.results[l].linked_object.description + '</b> <a style="color: darkblue" href=https://app.earth2.io/#propertyInfo/' + APIData2.results[l].linked_object.id + '>LINK</a> <br>Purchase ' + APIData2.results[l].amount + 'E$ <b>--></b> +' + APIData.results[i].amount + 'E$ Sold <br>Profit: ' + ((APIData.results[i].amount)+(APIData2.results[l].amount)).toFixed(2) + 'E$<br>');
                                //Count total profit
                                TotalProfit = TotalProfit + (APIData.results[i].amount+APIData2.results[l].amount);

                                //l = Object.keys(APIData2.results).length; //Stop for loop
                            }
                        }

                    }
                }

               j++;
            }while(APIData.next != null)


            k++;
        }while(APIData2.next != null)

SalesTotal = APIData.count;
Output("------------------------------- <br>Total profit: " + TotalProfit.toFixed(2) + "E$<br><br>Total sales: " + SalesTotal + " properties <br>Successful calculated sales: " + CountProfitCalcSuccessful + " properties <br><br>Can't calculate profit for <b>" + (SalesTotal-CountProfitCalcSuccessful) + " </b>properties<br> (Properties bought through accepted bids can't be calculated atm.)");

if(ErrorCount > 0)
{
    Output("<br>Got errors from <b>" + ErrorCount + "</b> transactions.<br>This transactions are not listed above and are NOT included in the calculation above!");
    Output("List of transactions with errors: <br>" + ErrorTransactionsList);
}

ScriptIsWorking(0);
}




function FeatureProfitCalcHelp()
{
    ClearOutput();
    Output("Show how much profit is made with sold properties");
}




async function FeatureJewelPricesT1Cracked()
    {
        ClearOutput(); //Clear Text Output

        var OutputString = "";

        //T1 Black
        Output('Find price data for T1 cracked black jewels.....');
        var APIData = await GetAPIData("bazaar/jewel_offers/?jewel__quality_level=CRACKED&jewel__color_name=BLACK&jewel__tier=1&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T1 Black(Cracked):</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;" ;

        //T1 Ochre
        Output('Find price data for T1 cracked ochre jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__quality_level=CRACKED&jewel__color_name=OCHRE&jewel__tier=1&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T1 Ochre(Cracked):</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "<br>";

         //T1 Grey
        Output('Find price data for T1 cracked grey jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__quality_level=CRACKED&jewel__color_name=GREY&jewel__tier=1&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T1 Grey(Cracked):</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T1 Blue
        Output('Find price data for T1 cracked blue jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__quality_level=CRACKED&jewel__color_name=BLUE&jewel__tier=1&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T1 Blue(Cracked):</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "<br>";

        //T1 Green
        Output('Find price data for T1 cracked green jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__quality_level=CRACKED&jewel__color_name=GREEN&jewel__tier=1&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T1 Green(Cracked):</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T1 Sandy
        Output('Find price data for T1 cracked sandy jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__quality_level=CRACKED&jewel__color_name=SANDY&jewel__tier=1&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T1 Sandy(Cracked):</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "<br>";

        //T1 Yellow
        Output('Find price data for T1 cracked yellow jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__quality_level=CRACKED&jewel__color_name=YELLOW&jewel__tier=1&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T1 Yellow(Cracked):</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T1 Anthracite
        Output('Find price data for T1 cracked anthracite jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__quality_level=CRACKED&jewel__color_name=ANTHRACITE&jewel__tier=1&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T1 Anthracite(Cracked):</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price;

        ClearOutput();
        Output(OutputString);

        ScriptIsWorking(0);
    }

function FeatureJewelPricesT1CrackedHelp()
{
    ClearOutput();
    Output("Shows the price,fee and the full price (price+fee) of the cheapest jewels on the bazar (Only T1 cracked jewels)");
}


async function FeatureJewelPricesT1Common()
    {
        ClearOutput(); //Clear Text Output

        var OutputString = "";

        //T1 Black
        Output('Find price data for T1 common black jewels.....');
        var APIData = await GetAPIData("bazaar/jewel_offers/?jewel__quality_level=COMMON&jewel__color_name=BLACK&jewel__tier=1&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T1 Black(Common):</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;" ;

        //T1 Ochre
        Output('Find price data for T1 common ochre jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__quality_level=COMMON&jewel__color_name=OCHRE&jewel__tier=1&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T1 Ochre(Common):</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "<br>";

         //T1 Grey
        Output('Find price data for T1 common grey jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__quality_level=COMMON&jewel__color_name=GREY&jewel__tier=1&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T1 Grey(Common):</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T1 Blue
        Output('Find price data for T1 common blue jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__quality_level=COMMON&jewel__color_name=BLUE&jewel__tier=1&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T1 Blue(Common):</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "<br>";

        //T1 Green
        Output('Find price data for T1 common green jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__quality_level=COMMON&jewel__color_name=GREEN&jewel__tier=1&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T1 Green(Common):</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T1 Sandy
        Output('Find price data for T1 common sandy jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__quality_level=COMMON&jewel__color_name=SANDY&jewel__tier=1&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T1 Sandy(Common):</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "<br>";

        //T1 Yellow
        Output('Find price data for T1 common yellow jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__quality_level=COMMON&jewel__color_name=YELLOW&jewel__tier=1&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T1 Yellow(Common):</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price + "&nbsp; &nbsp; &nbsp; &nbsp;";

        //T1 Anthracite
        Output('Find price data for T1 common anthracite jewels.....');
        APIData = await GetAPIData("bazaar/jewel_offers/?jewel__quality_level=COMMON&jewel__color_name=ANTHRACITE&jewel__tier=1&limit=5&offset=0&ordering=full_price");
        OutputString = OutputString + "<b>T1 Anthracite(Common):</b> Price:  " + APIData.results[0].price + "; Fee: " + APIData.results[0].fee + "; Full price: " + APIData.results[0].full_price;

        ClearOutput();
        Output(OutputString);

        ScriptIsWorking(0);
    }

function FeatureJewelPricesT1CommonHelp()
{
    ClearOutput();
    Output("Shows the price,fee and the full price (price+fee) of the cheapest jewels on the bazar (Only T1 common jewels)");
}


async function FeatureOpenBids()
{
    ClearOutput();

    //Todo: get user id
    var UserID = await GetAPIData("my/landfields/?limit=1&offset=0");
    UserID = UserID.results[0].owner;
    // Output(UserID);

    var TotalOpenBids = 0;
    var TotalOpenBidsAmount = 0;

        var i = 0;
        do
        {
            //Get every bid made ; 100
            var APIData = await GetAPIData("my/balance_changes/?balance_change_type=BID_MADE&limit=100&offset=" + (i*100));


            //Load every bid
            for(var j = 0; j<Object.keys(APIData.results).length; j++)
            {


                TotalApiRequests++;

                if(TotalApiRequests == 50 || TotalApiRequests == 100)
                {
                    TimetoWait = TimetoWait+500; //+500 ms
                }

                var IsSuccessful = 0;
                var APIData2 = null;

                while(IsSuccessful == 0)
                {
                    ScriptIsWorking(1);
                    try{
                        APIData2 = await $.getJSON('https://app.earth2.io/graphql?query={getOngoingBids(landfieldId:"' + APIData.results[j].linked_object.id + '"){result,buyer{id},offerSet{createdStr,value}}}', {_: new Date().getTime()})
                        .done(function() {
                            IsSuccessful = 1;
                        });
                    }catch(error){
                        //console.log(error);
                        Output('<span style="display: inline-block; color: darkred; font-weight: bold">Error: ' + error.status + ' - Script waits now 2 minutes and then tries again!</span>');
                        ScrollOutput();
                        await timeout(120000);
                    }

                }

                ScriptIsWorking(1);

                 //Speed throttling
                if(localStorage.getItem('E2MultiTool_IsSpeedThrottlingActive') == 1)
                {
                    console.log("Speed throttling: Wait " + TimetoWait + "ms");
                    await timeout(TimetoWait);
                }

                //check every bid of property
                for(var k = 0; k<Object.keys(APIData2.data.getOngoingBids).length; k++)
                {
                    //Output("k:" +k);
                   if(APIData2.data.getOngoingBids[k].buyer.id == UserID)
                   {
                       //Open Bid found:
                       TotalOpenBids++;
                       TotalOpenBidsAmount = TotalOpenBidsAmount + APIData.results[j].amount;
                       Output(TotalOpenBids + '. open bid: <b>' + APIData.results[j].linked_object.description + '</b> <a style="color: darkblue" href=https://app.earth2.io/#thegrid/' + APIData.results[j].linked_object.id + '>LINK</a> Date: ' + APIData2.data.getOngoingBids[k].offerSet[0].createdStr + '; Amount: ' + APIData.results[j].amount + 'E$');
                       ScrollOutput();
                   }
                }

            }
         i++;
        }while(APIData.next != null)


        Output("------------------------------ <br> Total open bids: " + TotalOpenBids);
        Output("Total amount: " + TotalOpenBidsAmount);
        ScriptIsWorking(0);
}


async function FeatureOpenBidsHelp()
{
ClearOutput();
    Output("Shows open bids (with link to property and amount of the bid), total open bids and total value of open bids ");
}



async function FeatureEssenceData()
{
    ClearOutput();

    Output(`
    1. <button id="Button_FeatureEssenceDataBeforeClaimAndTransform" style="width:10%; border: 1px solid black; background:lightgrey">Click here</button> to get data <b>before</b> claim & transformation<br>
    2. Claim and transform ether <br>
    3. <button id="Button_FeatureEssenceDataAfterClaimAndTransform" style="width:10%; border: 1px solid black; background:lightgrey">Click here</button> to get data <b>after</b> claim & transformation<br>
    4. Now you see data like EDC and OEDC below<br>
    <br>`);

   // <b>Method 2: Automatically (This will claim and transform your ether to essence!)</b><br>
    //<button id="Button_FeatureEssenceDataAutomatically" style="width:10%; border: 1px solid black; background:lightgrey">Click here</button>


    $("#Button_FeatureEssenceDataBeforeClaimAndTransform").click (FeatureEssenceData_BeforeClaimAndTransform);
    $("#Button_FeatureEssenceDataAutomatically").click (FeatureEssenceData_Automatically);


    ScriptIsWorking(0);
}

async function FeatureEssenceData_BeforeClaimAndTransform()
{

    ScriptIsWorking(1);
    var APIData = await GetAPIData("my/mentars/claimable_ether_amount/");
    ScriptIsWorking(1);
    var APIData2 = await GetAPIData("my/resources/balance/");
    //Output(APIData);
    Output(`
    Data before claim & transformation: ` + APIData2.ESNC + ` Essence; ` + APIData2.PESNC + ` EDC; ` + APIData.amount + ` Ether`);


    Ether = APIData.amount;
    EssenceBeforeClaimAndTransform = APIData2.ESNC;
    PromisedEssenceBeforeClaimAndTransform = APIData2.PESNC;
    $("#Button_FeatureEssenceDataAfterClaimAndTransform").click (FeatureEssenceData_AfterClaimAndTransform);
    ScriptIsWorking(0);
}


async function FeatureEssenceData_AfterClaimAndTransform()
{
    ScriptIsWorking(1);
    var APIData = await GetAPIData("my/mentars/claimable_ether_amount/");
    ScriptIsWorking(1);
    var APIData2 = await GetAPIData("my/resources/balance/");
    //Output(APIData);

    Output(`
    Data after claim and transformation: ` + APIData2.ESNC + ` Essence; ` + APIData2.PESNC + ` EDC; ` + APIData.amount + ` Ether<br>
    -----------------------------------------------<br>`+ Ether +
    ` Ether ---> ` + (APIData2.ESNC-EssenceBeforeClaimAndTransform) + ` Essence (` + (PromisedEssenceBeforeClaimAndTransform-APIData2.PESNC) + ` EDC; ` + ((APIData2.ESNC-EssenceBeforeClaimAndTransform)-(PromisedEssenceBeforeClaimAndTransform-APIData2.PESNC)) + ` OEDC) <br>
    <br>
    <button id="Button_FeatureEssenceDataSaveData" style="width:10%; border: 1px solid black; background:lightgrey">Save data local</button> &nbsp; &nbsp; <button id="Button_FeatureEssenceDataGetData" style="width:10%; border: 1px solid black; background:lightgrey">Get saved data</button> &nbsp; &nbsp; <button id="Button_FeatureEssenceDataDeleteData" style="width:15%; border: 1px solid black; background:lightgrey">Delete saved data</button><br>
    `);

    tmp =  Ether + ` Ether ---> ` + (APIData2.ESNC-EssenceBeforeClaimAndTransform) + ` Essence (` + (PromisedEssenceBeforeClaimAndTransform-APIData2.PESNC) + ` EDC; ` + ((APIData2.ESNC-EssenceBeforeClaimAndTransform)-(PromisedEssenceBeforeClaimAndTransform-APIData2.PESNC)) + ` OEDC)`;

    $("#Button_FeatureEssenceDataSaveData").click (FeatureEssenceData_SaveData);
    $("#Button_FeatureEssenceDataGetData").click (FeatureEssenceData_GetData);
    $("#Button_FeatureEssenceDataDeleteData").click (FeatureEssenceData_DeleteData);

    Ether = 0;
    EssenceBeforeClaimAndTransform = 0;
    PromisedEssenceBeforeClaimAndTransform = 0;
    ScriptIsWorking(0);
}

async function FeatureEssenceData_Automatically()
{
   // document.getElementsByClassName("material-icons ml-2.5 select-none").click();
   // $(".material-icons ml-2.5 select-none").trigger("click");
}

async function FeatureEssenceData_SaveData()
{
    ScriptIsWorking(1);
    const DateAndTime = new Date();

    if(localStorage.getItem('E2MultiTool_Essencedata') == null)
    {
        localStorage.setItem('E2MultiTool_Essencedata','');
    }

    localStorage.setItem('E2MultiTool_Essencedata', localStorage.getItem('E2MultiTool_Essencedata') + "<br>" + DateAndTime.getFullYear() + "-" + (DateAndTime.getMonth()+1) + "-" + DateAndTime.getDate() + " " + DateAndTime.getHours() + ":" + DateAndTime.getMinutes() + ": " + tmp);
    Output("<b>Saved todays essence data</b>");
    ScriptIsWorking(0);

    $("#Button_FeatureEssenceDataSaveData").click (FeatureEssenceData_SaveData);
    $("#Button_FeatureEssenceDataGetData").click (FeatureEssenceData_GetData);
    $("#Button_FeatureEssenceDataDeleteData").click (FeatureEssenceData_DeleteData);
}

async function FeatureEssenceData_GetData()
{
    ScriptIsWorking(1);
    Output("<b>Saved Essence data:</b>" + localStorage.getItem('E2MultiTool_Essencedata'));
    ScriptIsWorking(0);

    $("#Button_FeatureEssenceDataSaveData").click (FeatureEssenceData_SaveData);
    $("#Button_FeatureEssenceDataGetData").click (FeatureEssenceData_GetData);
    $("#Button_FeatureEssenceDataDeleteData").click (FeatureEssenceData_DeleteData);
}

async function FeatureEssenceData_DeleteData()
{
    ScriptIsWorking(1);
    localStorage.removeItem('E2MultiTool_Essencedata');
    Output("<b>Saved essence data is deleted</b>");
    ScriptIsWorking(0);

    $("#Button_FeatureEssenceDataSaveData").click (FeatureEssenceData_SaveData);
    $("#Button_FeatureEssenceDataGetData").click (FeatureEssenceData_GetData);
    $("#Button_FeatureEssenceDataDeleteData").click (FeatureEssenceData_DeleteData);
}


async function FeatureEssenceDataHelp()
{
ClearOutput();
    Output("Shows data like essence, ether available to claim and how much essence comes from EDC and OEDC(after claiming and transforming)");
}




async function FeatureLITData()
{
    var Properties = [];
    var TotalLIT = 0;
    var TotalLITProperties = 0;
    var i = 0;

    do
    {
        //Get every lit income ; 100
        var APIData = await GetAPIData("my/balance_changes/?balance_change_type=INCOME_LAND_CLASS&limit=11&offset=" + (i*11));



         //Load every lit income
            for(var j = 0; j<Object.keys(APIData.results).length; j++)
            {

                var IndexOfProperty = Properties.findIndex(p => p.id == APIData.results[j].linked_object.id);

               if(IndexOfProperty != -1)
               {
                   //Property is in list
                   // Output ("Is in list");


                   //Output("Index: " + IndexOfProperty);
                   Properties[IndexOfProperty].litamount += APIData.results[j].amount;
                   Properties[IndexOfProperty].litcount++;
               }
               else
               {
                   //Property not in list: add
                   //Output ("Add to list");

                   var NewProperty = new Object();
                   NewProperty.id = APIData.results[j].linked_object.id;
                   NewProperty.litamount = APIData.results[j].amount;
                   NewProperty.litcount = 1 ;
                   NewProperty.description = APIData.results[j].linked_object.description;
                   NewProperty.tiles_count = APIData.results[j].linked_object.tiles_count;

                  Properties.push(NewProperty); //Add property to list
               }
            }
        i++;
    }while(APIData.next != null)

    ClearOutput();
    Properties.forEach((p, index ) => { TotalLIT += Properties[index].litamount; TotalLITProperties++; Output('<b>' + Properties[index].description + '<b> (Tiles: ' + Properties[index].tiles_count + ') <a style="color: darkblue" href="https://app.earth2.io/#propertyInfo/' + Properties[index].id + '">LINK</a><br>LIT amount: '+ Properties[index].litamount.toFixed(2) + '<br>LIT received: ' + Properties[index].litcount + '<br>')});

    Output(`
                     ----------------------------------<br>
                     Total properties with LIT: `+ TotalLITProperties + `<br>
                     Total LIT amount: ` + TotalLIT.toFixed(2) );


    ScrollOutput();
    ScriptIsWorking(0);
}




function FeatureLITDataHelp()
{
    ClearOutput();
    Output("Show how much LIT comes from properties");
}


async function FeatureDepositsAndWithdrawalData()
{
    var DepositsList = "";
    var WithdrawalsList = "";
    var TotalDepositsAmount = 0;
    var TotalWithdrawalsAmount = 0;
    var TotalWithdrawalsAmountFee = 0;

    var WithdrawalsWithoutAmount = 0;


    ClearOutput();

    //Get data for deposits
    var k = 0;
    do
    {
        //Get every deposit ; 100
        var APIData = await GetAPIData("my/balance_changes/?balance_change_type=CREDIT&limit=100&offset=" + (k*100));

        Output("Load deposits: Page " + (k+1));

        //Load every deposit
        for(var j = 0; j<Object.keys(APIData.results).length; j++)
        {
            TotalDepositsAmount += APIData.results[j].amount;
            DepositsList = DepositsList + APIData.results[j].created_display + ":&nbsp; &nbsp;" + APIData.results[j].amount + "<br>";
        }

        k++;
    }while(APIData.next != null)



    //Get data for withdrawls
    var i = 0;

    do
    {
        //Get every withdrawl ; 100
        var APIData2 = await GetAPIData("my/balance_changes/?balance_change_type=PAYOUT_REQUESTED_FEE&limit=100&offset=" + (i*100));

        Output("Load withdrawals: Page " + (i+1));

        //Load every withdrawl
        for(var m = 0; m<Object.keys(APIData2.results).length; m++)
        {
            //Output("Test auszahlung #" + m + ": Status: " + APIData2.results[m].linked_object.status + "; Amount: " + APIData2.results[m].linked_object.amount);

            if(APIData2.results[m].linked_object != null)
            {
                if(APIData2.results[m].linked_object.status == "COMPLETE")
                {
                    //Output("Auszahlung #" + m + " complete");
                    TotalWithdrawalsAmount += parseFloat(APIData2.results[m].linked_object.amount);
                    TotalWithdrawalsAmountFee += APIData2.results[m].amount;
                    WithdrawalsList = WithdrawalsList + APIData2.results[m].created_display + ":&nbsp; &nbsp;Amount(incl. fee): " + APIData2.results[m].linked_object.amount + '&nbsp; &nbsp;Fee: ' + APIData2.results[m].amount + '<br>';
                }
            }
            else
            {
                Output("Cant load payout amount, only fee: " + APIData2.results[m].amount);
                Output("This payout is ignored in total withdrawals amount and in withdrawals fees amount!");
                WithdrawalsWithoutAmount++;
            }
        }


        i++;
    }while(APIData2.next != null)

            ClearOutput();
            Output("<b>Deposits:</b><br>" + DepositsList + "<br><b>Withdrawals:</b><br>" + WithdrawalsList);
            Output("------------------------------------------------<br>Total deposits amount: " + TotalDepositsAmount.toFixed(2) + "<br>Total withdrawals amount: " + TotalWithdrawalsAmount.toFixed(2));
            Output("Total withdrawals fees amount: " + TotalWithdrawalsAmountFee.toFixed(2) + "<br>Total withdrawals amount without fees: " + (TotalWithdrawalsAmount - Math.abs(TotalWithdrawalsAmountFee)).toFixed(2));
            Output("Cant get data for <b>" + WithdrawalsWithoutAmount + "</b> withdrawals. This withdrawals are ignored in the calculation above!");
            ScrollOutput();
            ScriptIsWorking(0);
}


function FeatureDepositsAndWithdrawalDataHelp()
{
    ClearOutput();
    Output("Show a list of deposits and withdrawals and the total amounts of it.");
}


async function FeatureRefIncomeCalc()
{
        var RefCodeIncomeList = [];
        var TotalRefCodeIncomeAmount = 0;
        var TotalRefCodeIncomeAmountOtherUsers = 0;
        var ErrorCount = 0;
        var ErrorTransactionsList = "";

        ClearOutput();

        //Get data for ref code income
        var i = 0;
        do
        {

            Output("Load referral code income: Page " + (i+1));

            //Get every income ; 100
            var APIData = await GetAPIData("my/balance_changes/?balance_change_type=INCOME_REFERRAL_CODE&limit=100&offset=" + (i*100));

             //Load every ref code purchase
            for(var j = 0; j<Object.keys(APIData.results).length; j++)
            {

                //has linked property?
                if(APIData.results[j].linked_object == null || APIData.results[j].linked_object == undefined)
                {
                    //Cant load linked property
                    Output('<span style="display: inline-block; color: darkred; font-weight: bold"> Error: Cant get linked property:Referral income: Page: #' + (i+1) + ' Property #' + (i*100+(j+1)) + 'Amount: ' + APIData.results[j].amount + '</span>');
                   ErrorCount++;
                    ErrorTransactionsList += '<span style="display: inline-block; color: darkred; font-weight: bold">Page: #' + (i+1) + 'Referral income: Property #' + (i*100+(j+1)) + ' Amount: ' + APIData.results[j].amount + '</span><br>';
                }
                else
                {
                    //Got linked property
                    TotalRefCodeIncomeAmount += APIData.results[j].amount;
                     RefCodeIncomeList.push(APIData.results[j].created_display + ":&nbsp; &nbsp;&nbsp; &nbsp;" + APIData.results[j].amount.toFixed(2) + '&nbsp; &nbsp;<span style="display: inline-block; width: 30%;"> Property: ' + APIData.results[j].linked_object.description + '</span>&nbsp; &nbsp;<a style="color: darkblue" href="https://app.earth2.io/#propertyInfo/' + APIData.results[j].linked_object.id + '">LINK to property</a><br>');
                }

           }

            i++;
        }while(APIData.next != null)


         //Filter own purchases, remove them

            var k = 0;
        do
        {
            //Get every purchase ; 100
            var APIData2 = await GetAPIData("my/balance_changes/?balance_change_type=PURCHASE&limit=100&offset=" + (k*100));



            //Load every property of purchase page
            for(var l = 0; l<Object.keys(APIData2.results).length; l++)
            {
                if(APIData2.results[l].linked_object == null || APIData2.results[l].linked_object == undefined)
                {
                   Output('<span style="display: inline-block; color: darkred; font-weight: bold"> Error: Cant get linked property: Purchases: Page: #' + (k+1) + ' Property #' + (k*100+(l+1)) + '</span>');
                   ErrorCount++;
                   ErrorTransactionsList += '<span style="display: inline-block; color: darkred; font-weight: bold">Purchases: Page: #' + (k+1) + ' Property #' + (k*100+(l+1)) + '</span><br>';
                }
                else
                {
                    //Ceck every transaction
                    RefCodeIncomeList = RefCodeIncomeList.filter(function(e) { return !e.includes(APIData2.results[l].linked_object.id) });
                }
            }




            k++;
        }while(APIData2.next != null)


            RefCodeIncomeList.forEach(element => {
                TotalRefCodeIncomeAmountOtherUsers += parseFloat(element.substring(element.indexOf(":&nbsp; &nbsp;&nbsp; &nbsp;") + 27, element.indexOf("&nbsp; &nbsp;<span style")));
            });







        ClearOutput();
        Output("<b>Referral code income:</b><br>" + RefCodeIncomeList.join(""));
        Output("------------------------------------------------ <br> Total income from other users: " + TotalRefCodeIncomeAmountOtherUsers.toFixed(2));
        Output("Total income from own purchases: " + (TotalRefCodeIncomeAmount-TotalRefCodeIncomeAmountOtherUsers).toFixed(2));
        Output("------------------------------------------------ <br> Total income (own + other users purchase): " + TotalRefCodeIncomeAmount.toFixed(2));

    if(ErrorCount > 0)
    {
        Output("<br>Cant get linked property from <b>" + ErrorCount + "</b> transactions.<br>This transactions are not listed above and the amount is NOT included in the calculation above!");
        Output("List of transactions without linked property: <br>" + ErrorTransactionsList);
    }

        ScrollOutput();
        ScriptIsWorking(0);

}


function FeatureRefIncomeCalcHelp()
{
    ClearOutput();
    Output("Show how money comes from purchases with referral code");
}

function FeatureSpeedThrottlingHelp()
{
    ClearOutput();
    Output("<br><br>If activated, it throttles the speed of the script by making breaks between the requests to Earth2. <br><b>It is recommended to have it activated. </b>");
}


async function FeaturePropertiesMap()
{
    ClearOutput();

     var attribution = new ol.control.Attribution({
     collapsible: false
     });

    var map = new ol.Map({
        controls: ol.control.defaults({attribution: false}).extend([attribution]),
        layers: [
            new ol.layer.Tile({
                source: new ol.source.OSM({
                    url: 'https://tile.openstreetmap.be/osmbe/{z}/{x}/{y}.png',
                                      attributions: [ ol.source.OSM.ATTRIBUTION, 'Tiles courtesy of <a href="https://geo6.be/">GEO-6</a>' ],
                    maxZoom: 18
                })
            })
        ],
        target: 'ScriptTextOutput',
        view: new ol.View({
            center: ol.proj.fromLonLat([4.35247, 50.84673]),
            maxZoom: 18,
            zoom: 12
        })
    });



var j = 0;
do
{

var APIData = await GetAPIData("my/landfields/?limit=20&sort=size&offset=" + (j*20));



    //Load every property of page
    for(var i = 0; i<Object.keys(APIData.results).length; i++)
    {



        //Check if T1 or T2
        if(APIData.results[i].landfield_tier == 2)
        {
            //T2 property

        }
        else
        {
            //T1 property
       }

        var tmp1 = APIData.results[i].center.substring(
    APIData.results[i].center.indexOf("(") + 1,
    APIData.results[i].center.lastIndexOf(",")
);
        var tmp2 =APIData.results[i].center.substring(
    APIData.results[i].center.indexOf(",") + 1,
    APIData.results[i].center.lastIndexOf(")")
);



        //Output(tmpLocation);
         var Feature = new ol.Feature({
             geometry:  new ol.geom.Point(ol.proj.fromLonLat([tmp2,tmp1]))
         });

        var layer = new ol.layer.Vector({
            source: new ol.source.Vector({
                features: [
                    Feature
                ]
            })
        });

        map.addLayer(layer);
        await timeout(500);

    }


    j++;

}while(APIData.next != null)
ScriptIsWorking(0);





}


function FeaturePropertiesMapHelp()
{
    ClearOutput();
    Output(`<br>
    <br>
    This function ahows a 3D map with owned properties and properties data. <br>
    You can choose between many filters for the map:<br>
    All properties, T1,T2,singles,750tile,with holo,all resources,gold, oil, coal, limestone, iron
    <br>
    <br>
    At first you need to request you profile and properties data from E2, therefore run the "Load/Update properties data" function.<br>
    Attention: This takes time, it could take up to several hours. But you only need to run it once, thereafter the data is saved local on your browser.<br>
    The data is still there after a reload of the webpage or if you restart your browser/pc.
    <br>
    <br>
    Thereafter you can use the different filters for the map.<br>
    If you click on the dots you get the property informations.
    `);
}



async function FeaturePropertiesMap3D()
{
    ClearOutput();

     
      function initialize() {

         var MapDIV = document.createElement ('div');
         MapDIV.setAttribute('id', 'MapDIV');
         //MapDIV.style.height = '100%';
         //MapDIV.style.width = '100%';
         MapDIV.style = "height: 100%; width: 100%";
         document.getElementById("ScriptTextOutput").append(MapDIV);
         //document.getElementById("ScriptTextOutput").style.height = '750px';


        earth = new WE.map('MapDIV');
        earth.setView([46.8011, 8.2266], 0.8);
        WE.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{
          attribution: '<a href="https://www.openstreetmap.org/copyright">© OpenStreetMap contributors</a>'
        }).addTo(earth);





        // rotate
        /*var before = null;
        requestAnimationFrame(function animate(now) {
            var c = earth.getPosition();
            var elapsed = before? now - before: 0;
            before = now;
            earth.setCenter([c[0], c[1] + 0.1*(elapsed/30)]);
            requestAnimationFrame(animate);
        });*/
      }
    initialize();

    if(localStorage.getItem('E2MultiTool_Properties') != null)
    {
        MapProperties = JSON.parse(localStorage.getItem('E2MultiTool_Properties'));
    }

    var ButtonDIV = document.createElement ('div');
    ButtonDIV.innerHTML = `
    <div style="position: absolute; top:10px; left: 10px;">

    <button id="Button_PropertiesMapGetProperties" style="width:110%; border: 1px solid black; background:lightgrey">Load/update properties</button><br>
    <br>
    <br>
    <button id="Button_ShowMapPropertiesAll" style="width:33%; border: 1px solid black; background:lightgrey">All</button>
    <button id="Button_ShowMapPropertiesT1" style="width:30%; border: 1px solid black; background:lightgrey">T1</button>
    <button id="Button_ShowMapPropertiesT2" style="width:30%; border: 1px solid black; background:lightgrey">T2</button><br>
    <button id="Button_ShowMapProperties1Tiles" style="width:20%; border: 1px solid black; background:lightgrey">1</button>
    <button id="Button_ShowMapProperties750Tiles" style="width:20%; border: 1px solid black; background:lightgrey">750</button>
    <button id="Button_ShowMapPropertiesHolos" style="width:30%; border: 1px solid black; background:lightgrey">Holos</button>
    <br><br>
    <button id="Button_ShowMapPropertiesResources" style="width:100%; border: 1px solid black; background:lightgrey">All resources</button>
    <br>
    <button id="Button_ShowMapPropertiesResourcesGold" style="width:33%; border: 1px solid black; background:lightgrey">Gold</button>
    <button id="Button_ShowMapPropertiesResourcesOil" style="width:25%; border: 1px solid black; background:lightgrey">Oil</button>
    <button id="Button_ShowMapPropertiesResourcesCoal" style="width:33%; border: 1px solid black; background:lightgrey">Coal</button><br>
    <button id="Button_ShowMapPropertiesResourcesIron" style="width:33%; border: 1px solid black; background:lightgrey">Iron</button>
    <button id="Button_ShowMapPropertiesResourcesLimestone" style="width:50%; border: 1px solid black; background:lightgrey">Limestone</button>


<br>
<br>
<label style="position: relative; display: inline-block; width: 100%; ">
<input id="checkbox_ignoresingles" style="opacity: 0; width: 0; height: 0;" type="checkbox">
<span style="color: black; font-size: 14px">Ignore singles</span>
</label>

    </div>
    `;
    document.getElementById("MapDIV").appendChild(ButtonDIV);



    var ButtonDIV2 = document.createElement ('div');
    ButtonDIV2.innerHTML = `
    <div style="position: absolute; top:10px; right: 30px;">




    </div>
    `;
    document.getElementById("MapDIV").appendChild(ButtonDIV2);

/*
<br>
<br>
<label style="position: relative; display: inline-block; width: 100%; ">
<input id="checkbox_ignoresingles" style="opacity: 0; width: 0; height: 0;" type="checkbox">
<span style="color: black; font-size: 14px">Rotating</span>
</label>
*/



    var TmpTileCount = 0;
    MapProperties.forEach(function(element)
                          {
        //ScriptIsWorking(1);
        TmpTileCount += element[3];
    });

    //ScriptIsWorking(1);
    //await timeout(3000);
    //ScriptIsWorking(0);

    var InfoDIV = document.createElement ('div');
    InfoDIV.innerHTML = `
    <div style="position: absolute; bottom: 10px; right: 20px;">

         Properties data from: <br>


    ` + PropertiesDataDate + "<br>(" + MapProperties.length + " properties | " + TmpTileCount + " tiles)</div>";
    document.getElementById("MapDIV").appendChild(InfoDIV);

/*
var j = 0;
do
{

var APIData = await GetAPIData("my/landfields/?limit=20&sort=size&offset=" + (j*20));



    //Load every property of page
    for(var i = 0; i<Object.keys(APIData.results).length; i++)
    {



        //Check if T1 or T2
        if(APIData.results[i].landfield_tier == 2)
        {
            //T2 property

        }
        else
        {
            //T1 property
       }

        var tmp1 = APIData.results[i].center.substring(
    APIData.results[i].center.indexOf("(") + 1,
    APIData.results[i].center.lastIndexOf(",")
);
        var tmp2 =APIData.results[i].center.substring(
    APIData.results[i].center.indexOf(",") + 1,
    APIData.results[i].center.lastIndexOf(")")
);



        //Add marker
         var marker = [];
         marker[j+i] = WE.marker([tmp2,tmp1],'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAB2SURBVChTjZC9FYAgDIQvWUE7LVnCQXQPJ3EQBmEJSu10BZHjp+Th15BL7iW8ExSeyaxBsMdyoQ6A1QA7XN5SJ+M9m9hvM55elJuKbkKPvoKukV+S3tmKlrcLjS6XbVICEnAU3YQx/Y+nFnHzxhNpknHscQYAH98JJ3YHBubHAAAAAElFTkSuQmCC',10,10).addTo(earth);
        marker[j+i].bindPopup("<b>" + APIData.results[i].description +"</b><br>" + APIData.results[i].location + "<br>(" + tmp2 + "," + tmp1 + ")<br><br>" + APIData.results[i].tile_indexes.length + " Tiles - T"+ APIData.results[i].landfield_tier +"  C" + APIData.results[i].tile_class + "<br>For Sale: " + APIData.results[i].for_sale + "<br><br><a style='color: blue' href='https://app.earth2.io/#thegrid/" + APIData.results[i].id + "'>Link to map</a><br><a style='color: blue' href='https://app.earth2.io/#propertyInfo/" + APIData.results[i].id + "'>Link to propertyinfo</a>", {maxWidth: 250, closeButton: true});



       // await timeout(500);

    }


    j++;

}while(APIData.next != null)
ScriptIsWorking(0);
*/

     $("#Button_PropertiesMapGetProperties").click({param1: "0"},LoadMapProperties);

    $("#Button_ShowMapPropertiesAll").click (ShowMapPropertiesAll);
    $("#Button_ShowMapPropertiesT1").click (ShowMapPropertiesT1);
    $("#Button_ShowMapPropertiesT2").click (ShowMapPropertiesT2);

    $("#Button_ShowMapProperties1Tiles").click (ShowMapProperties1Tiles);
    $("#Button_ShowMapProperties750Tiles").click (ShowMapProperties750Tiles);
    $("#Button_ShowMapPropertiesHolos").click (ShowMapPropertiesHolos);


    $("#Button_ShowMapPropertiesResources").click (ShowMapPropertiesResources);
    $("#Button_ShowMapPropertiesResourcesGold").click (ShowMapPropertiesResourcesGold);
    $("#Button_ShowMapPropertiesResourcesOil").click (ShowMapPropertiesResourcesOil);
    $("#Button_ShowMapPropertiesResourcesLimestone").click (ShowMapPropertiesResourcesLimestone);
    $("#Button_ShowMapPropertiesResourcesCoal").click (ShowMapPropertiesResourcesCoal);
    $("#Button_ShowMapPropertiesResourcesIron").click (ShowMapPropertiesResourcesIron);
   // $("#Button_ShowMapPropertiesResources").click (ShowMapPropertiesResources);



    //Checkboxes
     $('#checkbox_ignoresingles').change(function()
     {
        if(this.checked)
        {
            localStorage.setItem('E2MultiTool_ignoresingles','1');
        }
        else
        {
            localStorage.setItem('E2MultiTool_ignoresingles','0');
        }
        $('#textbox1').val(this.checked);
    });

    if(localStorage.getItem('E2MultiTool_IsSpeedThrottlingActive') == 1)
       {
            document.getElementById("checkbox_ignoresingles").checked = true;
       }


     



        // $("#ScriptTextOutput").resizable();
   /* $( "#ScriptTextOutput" ).resizable({
        stop: function( event, ui ) {

            console.log("Test");
            document.getElementById("MapDIV").firstChild.style.width = document.getElementById("ScriptTextOutput").style.width;
            document.getElementById("MapDIV").firstChild.style.height = document.getElementById("ScriptTextOutput").style.height;
            document.getElementById("MapDIV").firstChild.removeAttribute("width");
            document.getElementById("MapDIV").firstChild.removeAttribute("height");
        }
    });*/








}


function FeaturePropertiesMap3DHelp()
{

}


function DeleteMarkers()
{
   Markers.forEach(function(element) {
           element.removeFrom(earth);
        });
}


async function LoadMapProperties(OutputToTool)
{
    var j = 0;
    do
    {

        var APIData = await GetAPIData("my/landfields/?limit=20&sort=size&offset=" + (j*20));

        if(OutputToTool.data.param1 == "1")
        {
            ClearOutput();
        }

        //Load every property of page
        for(var i = 0; i<Object.keys(APIData.results).length; i++)
        {



            //Check if T1 or T2
            if(APIData.results[i].landfield_tier == 2)
            {
                //T2 property

            }
            else
            {
                //T1 property
            }

            var tmp1 = APIData.results[i].center.substring(
                APIData.results[i].center.indexOf("(") + 1,
                APIData.results[i].center.lastIndexOf(",")
            );
            var tmp2 =APIData.results[i].center.substring(
                APIData.results[i].center.indexOf(",") + 1,
                APIData.results[i].center.lastIndexOf(")")
            );

            if(OutputToTool.data.param1 == "1")
            {
                Output("Speed throttling: Wait 500ms");
            }
            else
            {
                console.log("Speed throttling: Wait 500ms");
            }
            await timeout(500);




            //Load resource info


            var IsSuccessful = 0;
            var data = "";

            while(IsSuccessful == 0)
            {
                ScriptIsWorking(1);
                try{
                    let response = await fetch("https://r.earth2.io/resources_tmp/" + APIData.results[i].id, {
                        "headers": {
                            "accept": "application/json, text/plain, */*",
                            "accept-language": "de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7",
                            "if-none-match": "W/\"438bf420f0c924bf1d4785abddc1e1e6\"",
                            "sec-ch-ua": "\" Not A;Brand\";v=\"99\", \"Chromium\";v=\"98\", \"Google Chrome\";v=\"98\"",
                            "sec-ch-ua-mobile": "?0",
                            "sec-ch-ua-platform": "\"Windows\"",
                            "sec-fetch-dest": "empty",
                            "sec-fetch-mode": "cors",
                            "sec-fetch-site": "same-site",
                            "x-csrftoken": document.getElementsByName("csrfmiddlewaretoken")[0].value
                        },
                        "referrer": "https://app.earth2.io/",
                        "referrerPolicy": "strict-origin-when-cross-origin",
                        "method": "GET",
                        "mode": "cors",
                        "credentials": "include"
                    });

                    data = await response.json();
                    IsSuccessful = 1 ;

                    //console.log(data);
                    ScriptIsWorking(1);

                }catch(error){
                    IsSuccessful = 0;
                    if(OutputToTool.data.param1 == "1")
                    {
                        console.log(error);
                        Output('Error: ' + error.status + ' - Script waits now 2 minutes and then tries again!');
                    }
                    else
                    {
                        console.log(error);
                        console.log('Error: ' + error.status + ' - Script waits now 2 minutes and then tries again!');
                    }

                    ScrollOutput();
                    await timeout(120000);
                }

            }









            //id, Titel, Tier [2],size,location,coordinates1,coordinates2, holo,res_gold,res_oil,res_limestone,res_iron,res_coal, class[13], for sale, holo m3 [15], transformed essence [16]
            MapProperties[((j*20)+i)] = [APIData.results[i].id, APIData.results[i].description.replaceAll(",", " - "), APIData.results[i].landfield_tier,APIData.results[i].tile_indexes.length,APIData.results[i].location.replaceAll(",", " - "), tmp2, tmp1, APIData.results[i].holobuilding_id,data.gold,data.oil,data.limestone,Object.values(data)[2],data.coal,APIData.results[i].tile_class, APIData.results[i].for_sale, null, APIData.results[i].claimed_essence_balance];
            //console.log(((j*20)+i) + ": " + MapProperties[j+i]);

            if(OutputToTool.data.param1 == "1")
                    {
                        Output((((j*20)+i)+1) + ". property");
                        ScrollOutput();
                    }
                    else
                    {
                        console.log((((j*20)+i)+1) + ". property");
                    }
          




        }


        j++;

    }while(APIData.next != null)





    // Get Holobuilding data

    j = 0;
    do
    {
        APIData = await GetAPIData("my/holobuildings/?limit=20&offset=" + (j*20));
        //Output((j*100));



        //Load every holo of page
        for(i = 0; i<Object.keys(APIData.results).length; i++)
        {

            //Output((j*20)+(i+1) + '. holobuilding analyzed');



            MapProperties.forEach(function(element)
            {
                if(APIData.results[i].landfield_id == element[0])
                {
                    //Add Volume/Holospace in m3
                    element[15] = parseFloat(APIData.results[i].total_volume);
                }
            });






        }

        j++;

    }while(APIData.next != null)







    localStorage.setItem('E2MultiTool_Properties', JSON.stringify(MapProperties));

    var tmpdate = new Date();
    localStorage.setItem('E2MultiTool_PropertiesDataDate', tmpdate.getFullYear() + "-" + (tmpdate.getMonth()+1) + "-" + tmpdate.getDate() + " " + tmpdate.getHours() + ":" + tmpdate.getMinutes());

    console.log("Property data saved");
    ScriptIsWorking(0);
}


async function ShowMapPropertiesAll()
{
    DeleteMarkers();
    var i = 0;
    MapProperties.forEach(function(element) {

        if(localStorage.getItem('E2MultiTool_ignoresingles') != "1" || element[3] > 1)
        {
           //console.log("Element5: " + element[5] + " Element6:" + element[6])

            var Resources = "";

            if(element[8])
            {
                Resources += "Gold";
            }

            if(element[9])
            {
                if(Resources == "")
                {
                    Resources += "Oil";
                }else
                {
                    Resources += ", Oil";
                }
            }


            if(element[12])
            {
                if(Resources == "")
                {
                    Resources += "Coal";
                }else
                {
                    Resources += ", Coal";
                }
            }

            if(element[11])
            {
                if(Resources == "")
                {
                    Resources += "Iron-Ore";
                }else
                {
                    Resources += ", Iron-Ore";
                }
            }

            if(element[10])
            {
                if(Resources == "")
                {
                    Resources += "Limestone";
                }else
                {
                    Resources += ", Limestone";
                }
            }

           Markers[i] = WE.marker([element[5],element[6]],IMGMarkerRedCircle,10,10).addTo(earth);
           Markers[i].bindPopup("<b>" + element[1] +"</b><br>" + element[4] + "<br>" + element[6] + "," + element[6] + "<br><br>" + element[3] + " Tiles - T"+ element[2] +"  C" + element[13] + "<br>For Sale: " + element[14] + "<br><br>Resources: " + Resources + "<br><br><a style='color: blue' href='https://app.earth2.io/#thegrid/" + element[0] + "'>Link to map</a> | <a style='color: blue' href='https://app.earth2.io/#propertyInfo/" + element[0] + "'>Link to propertyinfo</a>", {maxWidth: 250, closeButton: true});
        }
        i++;
    });
}

async function ShowMapPropertiesT1()
{
    DeleteMarkers();
    var i = 0;
    MapProperties.forEach(function(element) {

        if((localStorage.getItem('E2MultiTool_ignoresingles') != "1" || element[3] > 1) && element[2] == "1")
        {
           //console.log("Element5: " + element[5] + " Element6:" + element[6])

            var Resources = "";

            if(element[8])
            {
                Resources += "Gold";
            }

            if(element[9])
            {
                if(Resources == "")
                {
                    Resources += "Oil";
                }else
                {
                    Resources += ", Oil";
                }
            }

            if(element[12])
            {
                if(Resources == "")
                {
                    Resources += "Coal";
                }else
                {
                    Resources += ", Coal";
                }
            }

            if(element[11])
            {
                if(Resources == "")
                {
                    Resources += "Iron-Ore";
                }else
                {
                    Resources += ", Iron-Ore";
                }
            }

            if(element[10])
            {
                if(Resources == "")
                {
                    Resources += "Limestone";
                }else
                {
                    Resources += ", Limestone";
                }
            }

           Markers[i] = WE.marker([element[5],element[6]],'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAB2SURBVChTjZC9FYAgDIQvWUE7LVnCQXQPJ3EQBmEJSu10BZHjp+Th15BL7iW8ExSeyaxBsMdyoQ6A1QA7XN5SJ+M9m9hvM55elJuKbkKPvoKukV+S3tmKlrcLjS6XbVICEnAU3YQx/Y+nFnHzxhNpknHscQYAH98JJ3YHBubHAAAAAElFTkSuQmCC',10,10).addTo(earth);
           Markers[i].bindPopup("<b>" + element[1] +"</b><br>" + element[4] + "<br>" + element[6] + "," + element[6] + "<br><br>" + element[3] + " Tiles - T"+ element[2] +"  C" + element[13] + "<br>For Sale: " + element[14] + "<br><br>Resources: " + Resources + "<br><br><a style='color: blue' href='https://app.earth2.io/#thegrid/" + element[0] + "'>Link to map</a> | <a style='color: blue' href='https://app.earth2.io/#propertyInfo/" + element[0] + "'>Link to propertyinfo</a>", {maxWidth: 250, closeButton: true});
        }
        i++;
    });
}

async function ShowMapPropertiesT2()
{
    DeleteMarkers();
    var i = 0;
    MapProperties.forEach(function(element) {

        if((localStorage.getItem('E2MultiTool_ignoresingles') != "1" || element[3] > 1) && element[2] == "2")
        {
           //console.log("Element5: " + element[5] + " Element6:" + element[6])

            var Resources = "";

            if(element[8])
            {
                Resources += "Gold";
            }

            if(element[9])
            {
                if(Resources == "")
                {
                    Resources += "Oil";
                }else
                {
                    Resources += ", Oil";
                }
            }

            if(element[12])
            {
                if(Resources == "")
                {
                    Resources += "Coal";
                }else
                {
                    Resources += ", Coal";
                }
            }

            if(element[11])
            {
                if(Resources == "")
                {
                    Resources += "Iron-Ore";
                }else
                {
                    Resources += ", Iron-Ore";
                }
            }

            if(element[10])
            {
                if(Resources == "")
                {
                    Resources += "Limestone";
                }else
                {
                    Resources += ", Limestone";
                }
            }

           Markers[i] = WE.marker([element[5],element[6]],'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAB2SURBVChTjZC9FYAgDIQvWUE7LVnCQXQPJ3EQBmEJSu10BZHjp+Th15BL7iW8ExSeyaxBsMdyoQ6A1QA7XN5SJ+M9m9hvM55elJuKbkKPvoKukV+S3tmKlrcLjS6XbVICEnAU3YQx/Y+nFnHzxhNpknHscQYAH98JJ3YHBubHAAAAAElFTkSuQmCC',10,10).addTo(earth);
           Markers[i].bindPopup("<b>" + element[1] +"</b><br>" + element[4] + "<br>" + element[6] + "," + element[6] + "<br><br>" + element[3] + " Tiles - T"+ element[2] +"  C" + element[13] + "<br>For Sale: " + element[14] + "<br><br>Resources: " + Resources + "<br><br><a style='color: blue' href='https://app.earth2.io/#thegrid/" + element[0] + "'>Link to map</a> | <a style='color: blue' href='https://app.earth2.io/#propertyInfo/" + element[0] + "'>Link to propertyinfo</a>", {maxWidth: 250, closeButton: true});
        }
        i++;
    });
}

async function ShowMapProperties1Tiles()
{
    DeleteMarkers();
    var i = 0;
    MapProperties.forEach(function(element) {

        if((localStorage.getItem('E2MultiTool_ignoresingles') != "1" || element[3] > 1) && element[3] == "1")
        {
           //console.log("Element5: " + element[5] + " Element6:" + element[6])

            var Resources = "";

            if(element[8])
            {
                Resources += "Gold";
            }

            if(element[9])
            {
                if(Resources == "")
                {
                    Resources += "Oil";
                }else
                {
                    Resources += ", Oil";
                }
            }

            if(element[12])
            {
                if(Resources == "")
                {
                    Resources += "Coal";
                }else
                {
                    Resources += ", Coal";
                }
            }

            if(element[11])
            {
                if(Resources == "")
                {
                    Resources += "Iron-Ore";
                }else
                {
                    Resources += ", Iron-Ore";
                }
            }

            if(element[10])
            {
                if(Resources == "")
                {
                    Resources += "Limestone";
                }else
                {
                    Resources += ", Limestone";
                }
            }

           Markers[i] = WE.marker([element[5],element[6]],'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAB2SURBVChTjZC9FYAgDIQvWUE7LVnCQXQPJ3EQBmEJSu10BZHjp+Th15BL7iW8ExSeyaxBsMdyoQ6A1QA7XN5SJ+M9m9hvM55elJuKbkKPvoKukV+S3tmKlrcLjS6XbVICEnAU3YQx/Y+nFnHzxhNpknHscQYAH98JJ3YHBubHAAAAAElFTkSuQmCC',10,10).addTo(earth);
           Markers[i].bindPopup("<b>" + element[1] +"</b><br>" + element[4] + "<br>" + element[6] + "," + element[6] + "<br><br>" + element[3] + " Tiles - T"+ element[2] +"  C" + element[13] + "<br>For Sale: " + element[14] + "<br><br>Resources: " + Resources + "<br><br><a style='color: blue' href='https://app.earth2.io/#thegrid/" + element[0] + "'>Link to map</a> | <a style='color: blue' href='https://app.earth2.io/#propertyInfo/" + element[0] + "'>Link to propertyinfo</a>", {maxWidth: 250, closeButton: true});
        }
        i++;
    });
}

async function ShowMapProperties750Tiles()
{
    DeleteMarkers();
    var i = 0;
    MapProperties.forEach(function(element) {

        if((localStorage.getItem('E2MultiTool_ignoresingles') != "1" || element[3] > 1) && element[3] == "750")
        {
           //console.log("Element5: " + element[5] + " Element6:" + element[6])

            var Resources = "";

            if(element[8])
            {
                Resources += "Gold";
            }

            if(element[9])
            {
                if(Resources == "")
                {
                    Resources += "Oil";
                }else
                {
                    Resources += ", Oil";
                }
            }

            if(element[12])
            {
                if(Resources == "")
                {
                    Resources += "Coal";
                }else
                {
                    Resources += ", Coal";
                }
            }

            if(element[11])
            {
                if(Resources == "")
                {
                    Resources += "Iron-Ore";
                }else
                {
                    Resources += ", Iron-Ore";
                }
            }

            if(element[10])
            {
                if(Resources == "")
                {
                    Resources += "Limestone";
                }else
                {
                    Resources += ", Limestone";
                }
            }

           Markers[i] = WE.marker([element[5],element[6]],'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAB2SURBVChTjZC9FYAgDIQvWUE7LVnCQXQPJ3EQBmEJSu10BZHjp+Th15BL7iW8ExSeyaxBsMdyoQ6A1QA7XN5SJ+M9m9hvM55elJuKbkKPvoKukV+S3tmKlrcLjS6XbVICEnAU3YQx/Y+nFnHzxhNpknHscQYAH98JJ3YHBubHAAAAAElFTkSuQmCC',10,10).addTo(earth);
           Markers[i].bindPopup("<b>" + element[1] +"</b><br>" + element[4] + "<br>" + element[6] + "," + element[6] + "<br><br>" + element[3] + " Tiles - T"+ element[2] +"  C" + element[13] + "<br>For Sale: " + element[14] + "<br><br>Resources: " + Resources + "<br><br><a style='color: blue' href='https://app.earth2.io/#thegrid/" + element[0] + "'>Link to map</a> | <a style='color: blue' href='https://app.earth2.io/#propertyInfo/" + element[0] + "'>Link to propertyinfo</a>", {maxWidth: 250, closeButton: true});
        }
        i++;
    });
}

async function ShowMapPropertiesHolos()
{
    DeleteMarkers();
    var i = 0;
    MapProperties.forEach(function(element) {

        if((localStorage.getItem('E2MultiTool_ignoresingles') != "1" || element[3] > 1) && element[7] != null)
        {
           //console.log("Element5: " + element[5] + " Element6:" + element[6])

            var Resources = "";

            if(element[8])
            {
                Resources += "Gold";
            }

            if(element[9])
            {
                if(Resources == "")
                {
                    Resources += "Oil";
                }else
                {
                    Resources += ", Oil";
                }
            }

            if(element[12])
            {
                if(Resources == "")
                {
                    Resources += "Coal";
                }else
                {
                    Resources += ", Coal";
                }
            }

            if(element[11])
            {
                if(Resources == "")
                {
                    Resources += "Iron-Ore";
                }else
                {
                    Resources += ", Iron-Ore";
                }
            }

            if(element[10])
            {
                if(Resources == "")
                {
                    Resources += "Limestone";
                }else
                {
                    Resources += ", Limestone";
                }
            }

           Markers[i] = WE.marker([element[5],element[6]],'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAB2SURBVChTjZC9FYAgDIQvWUE7LVnCQXQPJ3EQBmEJSu10BZHjp+Th15BL7iW8ExSeyaxBsMdyoQ6A1QA7XN5SJ+M9m9hvM55elJuKbkKPvoKukV+S3tmKlrcLjS6XbVICEnAU3YQx/Y+nFnHzxhNpknHscQYAH98JJ3YHBubHAAAAAElFTkSuQmCC',10,10).addTo(earth);
           Markers[i].bindPopup("<b>" + element[1] +"</b><br>" + element[4] + "<br>" + element[6] + "," + element[6] + "<br><br>" + element[3] + " Tiles - T"+ element[2] +"  C" + element[13] + "<br>Holobuilding: " + element[7] +  "<br>For Sale: " + element[14] + "<br><br>Resources: " + Resources + "<br><br><a style='color: blue' href='https://app.earth2.io/#thegrid/" + element[0] + "'>Link to map</a> | <a style='color: blue' href='https://app.earth2.io/#propertyInfo/" + element[0] + "'>Link to propertyinfo</a>", {maxWidth: 250, closeButton: true});
        }
        i++;
    });
}

async function ShowMapPropertiesResources()
{
    DeleteMarkers();
    var i = 0;
    MapProperties.forEach(function(element) {

        if((localStorage.getItem('E2MultiTool_ignoresingles') != "1" || element[3] > 1) && (element[8] == true || element[9] == true || element[10] == true || element[11] == true || element[12] == true))
        {
            if(element[12] == true)
           {
               Markers[i] = WE.marker([element[5],element[6]],IMGMarkerDarkGreyCircle,10,10).addTo(earth);
           }
            if(element[11] == true)
           {
               Markers[i] = WE.marker([element[5],element[6]],IMGMarkerRedCircle,10,10).addTo(earth);
           }
            if(element[10] == true)
           {
               Markers[i] = WE.marker([element[5],element[6]],IMGMarkerGreyCircle,10,10).addTo(earth);
           }
            if(element[9] == true)
           {
               Markers[i] = WE.marker([element[5],element[6]],IMGMarkerBlackCircle,10,10).addTo(earth);
           }
           if(element[8] == true)
           {
               Markers[i] = WE.marker([element[5],element[6]],IMGMarkerYellowCircle,10,10).addTo(earth);
           }


            var Resources = "";

            if(element[8])
            {
                Resources += "Gold";
            }

            if(element[9])
            {
                if(Resources == "")
                {
                    Resources += "Oil";
                }else
                {
                    Resources += ", Oil";
                }
            }

            if(element[12])
            {
                if(Resources == "")
                {
                    Resources += "Coal";
                }else
                {
                    Resources += ", Coal";
                }
            }

            if(element[11])
            {
                if(Resources == "")
                {
                    Resources += "Iron-Ore";
                }else
                {
                    Resources += ", Iron-Ore";
                }
            }

            if(element[10])
            {
                if(Resources == "")
                {
                    Resources += "Limestone";
                }else
                {
                    Resources += ", Limestone";
                }
            }


              Markers[i].bindPopup("<b>" + element[1] +"</b><br>" + element[4] + "<br>" + element[6] + "," + element[6] + "<br><br>" + element[3] + " Tiles - T"+ element[2] +"  C" + element[13] + "<br>For Sale: " + element[14] + "<br><br>Resources: " + Resources + "<br><br><a style='color: blue' href='https://app.earth2.io/#thegrid/" + element[0] + "'>Link to map</a> | <a style='color: blue' href='https://app.earth2.io/#propertyInfo/" + element[0] + "'>Link to propertyinfo</a>", {maxWidth: 250, closeButton: true});
        }
        i++;
    });
}

async function ShowMapPropertiesResourcesGold()
{
    DeleteMarkers();
    var i = 0;
    MapProperties.forEach(function(element) {

        if((localStorage.getItem('E2MultiTool_ignoresingles') != "1" || element[3] > 1) && element[8] == true)
        {
           //console.log("Element5: " + element[5] + " Element6:" + element[6])

            var Resources = "";

            if(element[8])
            {
                Resources += "Gold";
            }

            if(element[9])
            {
                if(Resources == "")
                {
                    Resources += "Oil";
                }else
                {
                    Resources += ", Oil";
                }
            }

            if(element[12])
            {
                if(Resources == "")
                {
                    Resources += "Coal";
                }else
                {
                    Resources += ", Coal";
                }
            }

            if(element[11])
            {
                if(Resources == "")
                {
                    Resources += "Iron-Ore";
                }else
                {
                    Resources += ", Iron-Ore";
                }
            }

            if(element[10])
            {
                if(Resources == "")
                {
                    Resources += "Limestone";
                }else
                {
                    Resources += ", Limestone";
                }
            }

           Markers[i] = WE.marker([element[5],element[6]],IMGMarkerYellowCircle,10,10).addTo(earth);
           Markers[i].bindPopup("<b>" + element[1] +"</b><br>" + element[4] + "<br>" + element[6] + "," + element[6] + "<br><br>" + element[3] + " Tiles - T"+ element[2] +"  C" + element[13] + "<br>For Sale: " + element[14] + "<br><br>Resources: " + Resources + "<br><br><a style='color: blue' href='https://app.earth2.io/#thegrid/" + element[0] + "'>Link to map</a> | <a style='color: blue' href='https://app.earth2.io/#propertyInfo/" + element[0] + "'>Link to propertyinfo</a>", {maxWidth: 250, closeButton: true});
        }
        i++;
    });
}

async function ShowMapPropertiesResourcesOil()
{
    DeleteMarkers();
    var i = 0;
    MapProperties.forEach(function(element) {

        if((localStorage.getItem('E2MultiTool_ignoresingles') != "1" || element[3] > 1) && element[9] == true)
        {
           //console.log("Element5: " + element[5] + " Element6:" + element[6])

            var Resources = "";

            if(element[8])
            {
                Resources += "Gold";
            }

            if(element[9])
            {
                if(Resources == "")
                {
                    Resources += "Oil";
                }else
                {
                    Resources += ", Oil";
                }
            }

            if(element[12])
            {
                if(Resources == "")
                {
                    Resources += "Coal";
                }else
                {
                    Resources += ", Coal";
                }
            }

            if(element[11])
            {
                if(Resources == "")
                {
                    Resources += "Iron-Ore";
                }else
                {
                    Resources += ", Iron-Ore";
                }
            }

            if(element[10])
            {
                if(Resources == "")
                {
                    Resources += "Limestone";
                }else
                {
                    Resources += ", Limestone";
                }
            }

           Markers[i] = WE.marker([element[5],element[6]],IMGMarkerBlackCircle,10,10).addTo(earth);
           Markers[i].bindPopup("<b>" + element[1] +"</b><br>" + element[4] + "<br>" + element[6] + "," + element[6] + "<br><br>" + element[3] + " Tiles - T"+ element[2] +"  C" + element[13] + "<br>For Sale: " + element[14] + "<br><br>Resources: " + Resources + "<br><br><a style='color: blue' href='https://app.earth2.io/#thegrid/" + element[0] + "'>Link to map</a> | <a style='color: blue' href='https://app.earth2.io/#propertyInfo/" + element[0] + "'>Link to propertyinfo</a>", {maxWidth: 250, closeButton: true});
        }
        i++;
    });
}

async function ShowMapPropertiesResourcesLimestone()
{
    DeleteMarkers();
    var i = 0;
    MapProperties.forEach(function(element) {

        if((localStorage.getItem('E2MultiTool_ignoresingles') != "1" || element[3] > 1) && element[10] == true)
        {
           //console.log("Element5: " + element[5] + " Element6:" + element[6])

            var Resources = "";

            if(element[8])
            {
                Resources += "Gold";
            }

            if(element[9])
            {
                if(Resources == "")
                {
                    Resources += "Oil";
                }else
                {
                    Resources += ", Oil";
                }
            }

            if(element[12])
            {
                if(Resources == "")
                {
                    Resources += "Coal";
                }else
                {
                    Resources += ", Coal";
                }
            }

            if(element[11])
            {
                if(Resources == "")
                {
                    Resources += "Iron-Ore";
                }else
                {
                    Resources += ", Iron-Ore";
                }
            }

            if(element[10])
            {
                if(Resources == "")
                {
                    Resources += "Limestone";
                }else
                {
                    Resources += ", Limestone";
                }
            }

           Markers[i] = WE.marker([element[5],element[6]],IMGMarkerGreyCircle,10,10).addTo(earth);
           Markers[i].bindPopup("<b>" + element[1] +"</b><br>" + element[4] + "<br>" + element[6] + "," + element[6] + "<br><br>" + element[3] + " Tiles - T"+ element[2] +"  C" + element[13] + "<br>For Sale: " + element[14] + "<br><br>Resources: " + Resources + "<br><br><a style='color: blue' href='https://app.earth2.io/#thegrid/" + element[0] + "'>Link to map</a> | <a style='color: blue' href='https://app.earth2.io/#propertyInfo/" + element[0] + "'>Link to propertyinfo</a>", {maxWidth: 250, closeButton: true});
        }
        i++;
    });
}

async function ShowMapPropertiesResourcesIron()
{
    DeleteMarkers();
    var i = 0;
    MapProperties.forEach(function(element) {

        if((localStorage.getItem('E2MultiTool_ignoresingles') != "1" || element[3] > 1) && element[11] == true)
        {
           //console.log("Element5: " + element[5] + " Element6:" + element[6])

            var Resources = "";

            if(element[8])
            {
                Resources += "Gold";
            }

            if(element[9])
            {
                if(Resources == "")
                {
                    Resources += "Oil";
                }else
                {
                    Resources += ", Oil";
                }
            }

            if(element[12])
            {
                if(Resources == "")
                {
                    Resources += "Coal";
                }else
                {
                    Resources += ", Coal";
                }
            }

            if(element[11])
            {
                if(Resources == "")
                {
                    Resources += "Iron-Ore";
                }else
                {
                    Resources += ", Iron-Ore";
                }
            }

            if(element[10])
            {
                if(Resources == "")
                {
                    Resources += "Limestone";
                }else
                {
                    Resources += ", Limestone";
                }
            }

           Markers[i] = WE.marker([element[5],element[6]],IMGMarkerRedCircle,10,10).addTo(earth);
           Markers[i].bindPopup("<b>" + element[1] +"</b><br>" + element[4] + "<br>" + element[6] + "," + element[6] + "<br><br>" + element[3] + " Tiles - T"+ element[2] +"  C" + element[13] + "<br>For Sale: " + element[14] + "<br><br>Resources: " + Resources + "<br><br><a style='color: blue' href='https://app.earth2.io/#thegrid/" + element[0] + "'>Link to map</a> | <a style='color: blue' href='https://app.earth2.io/#propertyInfo/" + element[0] + "'>Link to propertyinfo</a>", {maxWidth: 250, closeButton: true});
        }
        i++;
    });
}

async function ShowMapPropertiesResourcesCoal()
{
    DeleteMarkers();
    var i = 0;
    MapProperties.forEach(function(element) {

        if((localStorage.getItem('E2MultiTool_ignoresingles') != "1" || element[3] > 1) && element[12] == true)
        {
           //console.log("Element5: " + element[5] + " Element6:" + element[6])

            var Resources = "";

            if(element[8])
            {
                Resources += "Gold";
            }

            if(element[9])
            {
                if(Resources == "")
                {
                    Resources += "Oil";
                }else
                {
                    Resources += ", Oil";
                }
            }

            if(element[12])
            {
                if(Resources == "")
                {
                    Resources += "Coal";
                }else
                {
                    Resources += ", Coal";
                }
            }

            if(element[11])
            {
                if(Resources == "")
                {
                    Resources += "Iron-Ore";
                }else
                {
                    Resources += ", Iron-Ore";
                }
            }

            if(element[10])
            {
                if(Resources == "")
                {
                    Resources += "Limestone";
                }else
                {
                    Resources += ", Limestone";
                }
            }

           Markers[i] = WE.marker([element[5],element[6]],IMGMarkerDarkGreyCircle,10,10).addTo(earth);
           Markers[i].bindPopup("<b>" + element[1] +"</b><br>" + element[4] + "<br>" + element[6] + "," + element[6] + "<br><br>" + element[3] + " Tiles - T"+ element[2] +"  C" + element[13] + "<br>For Sale: " + element[14] + "<br><br>Resources: " + Resources + "<br><br><a style='color: blue' href='https://app.earth2.io/#thegrid/" + element[0] + "'>Link to map</a> | <a style='color: blue' href='https://app.earth2.io/#propertyInfo/" + element[0] + "'>Link to propertyinfo</a>", {maxWidth: 250, closeButton: true});
        }
        i++;
    });
}


async function FeatureResourcesList()
{
    ClearOutput();

    var ResCount = 5; //Number of available resources
    var TilesCounters = Array(ResCount).fill(0);
    var TilesCountersT1 = Array(ResCount).fill(0);
    var TilesCountersT2 = Array(ResCount).fill(0);
    var TilesCountersClass1 = Array(ResCount).fill(0);
    var TilesCountersClass2 = Array(ResCount).fill(0);
    var TilesCountersClass3 = Array(ResCount).fill(0);
    var PropertiesCounters = Array(ResCount).fill(0);
    var PropertiesCountersTier1 = Array(ResCount).fill(0);
    var PropertiesCountersTier2 = Array(ResCount).fill(0);
    var PropertiesCountersClass1 = Array(ResCount).fill(0);
    var PropertiesCountersClass2 = Array(ResCount).fill(0);
    var PropertiesCountersClass3 = Array(ResCount).fill(0);
    var Resources = ["<b>GOLD PROPERTIES</b><br><hr style='width: 90%; margin-left:5%; margin-right:5% ;border-top: 2px dashed black;'>","<b>OIL PROPERTIES</b><br><hr style='width: 90%; margin-left:5%; margin-right:5% ;border-top: 2px dashed black;'>","<b>COAL PROPERTIES</b><br><hr style='width: 90%; margin-left:5%; margin-right:5% ;border-top: 2px dashed black;'>","<b>IRON-ORE PROPERTIES</b><br><hr style='width: 90%; margin-left:5%; margin-right:5% ;border-top: 2px dashed black;'>","<b>LIMESTONE PROPERTIES</b><br><hr style='width: 90%; margin-left:5%; margin-right:5% ;border-top: 2px dashed black;'>"] //Gold, Oil, Coal, Iron-Ore, Limestone

     Output(`
    <br>
    <button id="Button_FeatureResourcesListGetData" style="width:30%; border: 1px solid black; background:lightgrey">Load/update properties data</button>
    `);

    //$("#Button_FeatureResourcesListGetData").click (LoadMapProperties);



    if(localStorage.getItem('E2MultiTool_Properties') == null)
    {
       Output(`<br><br><br><br><b>No properties data found.<br>Please load/update properties data first!`);
    }
    else
    {
        MapProperties = JSON.parse(localStorage.getItem('E2MultiTool_Properties'));


        var TmpTileCount = 0;
        MapProperties.forEach(function(element)
        {
            //ScriptIsWorking(1);
            TmpTileCount += element[3];
        });


        Output("Saved properties data from:  " + PropertiesDataDate + " (" + MapProperties.length + " properties | " + TmpTileCount + " tiles)<br><br>");

        function sortTilesSizes(a, b) {
            if (a[3] === b[3]) {
                return 0;
            }
            else {
                return (a[3] < b[3]) ? 1 : -1;
            }
        }


       var MapPropertiesSorted = MapProperties.sort(sortTilesSizes);




        //var y = 1;
        MapPropertiesSorted.forEach(function(element)
        {


            ScriptIsWorking(1);
            //ClearOutput();
           // Output(y + "./" + MapProperties.length + " properties checked");
           // y++;



             //Gold
             if(element[8])
            {
               Resources[0] +=  "<span style='display: inline-block; width: 10%;'>" + element[3] + " Tiles</span> <span style='display: inline-block; width: 4%;'>T"+ element[2] +"</span><span style='display: inline-block; width: 4%;'>C" + element[13] + "</span><span style='display: inline-block; width: 50%;'>" + element[1] + "</span><a style='color: darkblue' href='https://app.earth2.io/#thegrid/" + element[0] + "'>Map</a> | <a style='color: darkblue' href='https://app.earth2.io/#propertyInfo/" + element[0] + "'>Propertyinfo</a><br>";
               PropertiesCounters[0]++;
               TilesCounters[0] += element[3];

                //Tier 1
                if(element[2] == "1")
                {
                    TilesCountersT1[0] += element[3];
                    PropertiesCountersTier1[0]++;

                    //Class 1
                    if(element[13] == "1")
                    {
                        TilesCountersClass1[0] += element[3]
                        PropertiesCountersClass1[0]++;
                    }

                    //Class 2
                    if(element[13] == "2")
                    {
                        TilesCountersClass2[0] += element[3]
                        PropertiesCountersClass2[0]++;
                    }


                    //Class 3
                    if(element[13] == "3")
                    {
                        TilesCountersClass3[0] += element[3]
                        PropertiesCountersClass3[0]++;
                    }
                }

                //Tier 2
                 if(element[2] == "2")
                {
                    TilesCountersT2[0] += element[3];
                    PropertiesCountersTier2[0]++;
                }




            }

            //Oil
            if(element[9])
            {
               Resources[1] +=  "<span style='display: inline-block; width: 10%;'>" + element[3] + " Tiles</span> <span style='display: inline-block; width: 4%;'>T"+ element[2] +"</span><span style='display: inline-block; width: 4%;'>C" + element[13] + "</span><span style='display: inline-block; width: 50%;'>" + element[1] + "</span><a style='color: darkblue' href='https://app.earth2.io/#thegrid/" + element[0] + "'>Map</a> | <a style='color: darkblue' href='https://app.earth2.io/#propertyInfo/" + element[0] + "'>Propertyinfo</a><br>";
               PropertiesCounters[1]++;
               TilesCounters[1] += element[3];

                //Tier 1
                if(element[2] == "1")
                {
                    TilesCountersT1[1] += element[3];
                    PropertiesCountersTier1[1]++;

                    //Class 1
                    if(element[13] == "1")
                    {
                        TilesCountersClass1[1] += element[3]
                        PropertiesCountersClass1[1]++;
                    }

                    //Class 2
                    if(element[13] == "2")
                    {
                        TilesCountersClass2[1] += element[3]
                        PropertiesCountersClass2[1]++;
                    }


                    //Class 3
                    if(element[13] == "3")
                    {
                        TilesCountersClass3[1] += element[3]
                        PropertiesCountersClass3[1]++;
                    }
                }

                //Tier 2
                 if(element[2] == "2")
                {
                    TilesCountersT2[1] += element[3];
                    PropertiesCountersTier2[1]++;
                }
            }

            //Coal
            if(element[12])
            {
               Resources[2] +=  "<span style='display: inline-block; width: 10%;'>" + element[3] + " Tiles</span> <span style='display: inline-block; width: 4%;'>T"+ element[2] +"</span><span style='display: inline-block; width: 4%;'>C" + element[13] + "</span><span style='display: inline-block; width: 50%;'>" + element[1] + "</span><a style='color: darkblue' href='https://app.earth2.io/#thegrid/" + element[0] + "'>Map</a> | <a style='color: darkblue' href='https://app.earth2.io/#propertyInfo/" + element[0] + "'>Propertyinfo</a><br>";
               PropertiesCounters[2]++;
               TilesCounters[2] += element[3];

                //Tier 1
                if(element[2] == "1")
                {
                    TilesCountersT1[2] += element[3];
                    PropertiesCountersTier1[2]++;

                    //Class 1
                    if(element[13] == "1")
                    {
                        TilesCountersClass1[2] += element[3]
                        PropertiesCountersClass1[2]++;
                    }

                    //Class 2
                    if(element[13] == "2")
                    {
                        TilesCountersClass2[2] += element[3]
                        PropertiesCountersClass2[2]++;
                    }


                    //Class 3
                    if(element[13] == "3")
                    {
                        TilesCountersClass3[2] += element[3]
                        PropertiesCountersClass3[2]++;
                    }
                }

                //Tier 2
                 if(element[2] == "2")
                {
                    TilesCountersT2[2] += element[3];
                    PropertiesCountersTier2[2]++;
                }
            }

            //iron-Ore
            if(element[11])
            {
               Resources[3] += "<span style='display: inline-block; width: 10%;'>" + element[3] + " Tiles</span> <span style='display: inline-block; width: 4%;'>T"+ element[2] +"</span><span style='display: inline-block; width: 4%;'>C" + element[13] + "</span><span style='display: inline-block; width: 50%;'>" + element[1] + "</span><a style='color: darkblue' href='https://app.earth2.io/#thegrid/" + element[0] + "'>Map</a> | <a style='color: darkblue' href='https://app.earth2.io/#propertyInfo/" + element[0] + "'>Propertyinfo</a><br>";
               PropertiesCounters[3]++;
               TilesCounters[3] += element[3];

                //Tier 1
                if(element[2] == "1")
                {
                    TilesCountersT1[3] += element[3];
                    PropertiesCountersTier1[3]++;

                    //Class 1
                    if(element[13] == "1")
                    {
                        TilesCountersClass1[3] += element[3]
                        PropertiesCountersClass1[3]++;
                    }

                    //Class 2
                    if(element[13] == "2")
                    {
                        TilesCountersClass2[3] += element[3]
                        PropertiesCountersClass2[3]++;
                    }


                    //Class 3
                    if(element[13] == "3")
                    {
                        TilesCountersClass3[3] += element[3]
                        PropertiesCountersClass3[3]++;
                    }
                }

                //Tier 2
                 if(element[2] == "2")
                {
                    TilesCountersT2[3] += element[3];
                    PropertiesCountersTier2[3]++;
                }
            }

            //Limestone
            if(element[10])
            {
               Resources[4] +=  "<span style='display: inline-block; width: 10%;'>" + element[3] + " Tiles</span> <span style='display: inline-block; width: 4%;'>T"+ element[2] +"</span><span style='display: inline-block; width: 4%;'>C" + element[13] + "</span><span style='display: inline-block; width: 50%;'>" + element[1] + "</span><a style='color: darkblue' href='https://app.earth2.io/#thegrid/" + element[0] + "'>Map</a> | <a style='color: darkblue' href='https://app.earth2.io/#propertyInfo/" + element[0] + "'>Propertyinfo</a><br>";
               PropertiesCounters[4]++;
               TilesCounters[4] += element[3];

                //Tier 1
                if(element[2] == "1")
                {
                    TilesCountersT1[4] += element[3];
                    PropertiesCountersTier1[4]++;

                    //Class 1
                    if(element[13] == "1")
                    {
                        TilesCountersClass1[4] += element[3]
                        PropertiesCountersClass1[4]++;
                    }

                    //Class 2
                    if(element[13] == "2")
                    {
                        TilesCountersClass2[4] += element[3]
                        PropertiesCountersClass2[4]++;
                    }


                    //Class 3
                    if(element[13] == "3")
                    {
                        TilesCountersClass3[4] += element[3]
                        PropertiesCountersClass3[4]++;
                    }
                }

                //Tier 2
                 if(element[2] == "2")
                {
                    TilesCountersT2[4] += element[3];
                    PropertiesCountersTier2[4]++;
                }
            }



        });

        //ClearOutput();
         for(var x = 0; x<=(ResCount-1); x++)
         {
             Output(Resources[x] + "<hr style='width: 90%; margin-left:5%; margin-right:5% ;border-top: 2px dashed black;'>Total: " + PropertiesCounters[x] + " properties | " + TilesCounters[x] + " tiles <br>" +
             "T1: " + PropertiesCountersTier1[x] + " properties | " + TilesCountersT1[x] + " tiles <br>" +
             "T2: " + PropertiesCountersTier2[x] + " properties | " + TilesCountersT2[x] + " tiles <br>" +
             "T1: C1: " + PropertiesCountersClass1[x] + " properties | " + TilesCountersClass1[x] + " tiles <br>" +
             "T1: C2: " + PropertiesCountersClass2[x] + " properties | " + TilesCountersClass2[x] + " tiles <br>" +
             "T1: C3: " + PropertiesCountersClass3[x] + " properties | " + TilesCountersClass3[x] + " tiles <br><br><br>");
         }
        ScriptIsWorking(0);

     }

     $("#Button_FeatureResourcesListGetData").click({param1: "1"},LoadMapProperties);
}

function FeatureResourcesListHelp()
{
ClearOutput();
    Output(`<br>
    <br>
    This function shows a list of properties with resources on it for each different resource.<br>
    At the end of each list it shows a counter for total properties/tiles and how many are T1/T2/T1 C1/T1 C2/T1 C3
    <br>
    <br>
    At first you need to request you profile and properties data from E2, therefore run the "Load/Update properties data" function.<br>
    Attention: This takes time, it could take up to several hours. But you only need to run it once, thereafter the data is saved local on your browser.<br>
    The data is still there after a reload of the webpage or if you restart your browser/pc.
    `);

}


async function FeatureProfilUpgradeSettings()
{
    ClearOutput();


    Output(`
    <br>
    <button id="Button_FeatureResourcesListGetData" style="width:30%; border: 1px solid black; background:lightgrey">Load/update properties data</button>
    `);





    if(localStorage.getItem('E2MultiTool_Properties') == null)
    {
       Output(`<br><b>No properties data found.<br>Please load/update properties data!<br>`);
    }
    else
    {
        MapProperties = JSON.parse(localStorage.getItem('E2MultiTool_Properties'));


        var TmpTileCount = 0;
        MapProperties.forEach(function(element)
        {
            //ScriptIsWorking(1);
            TmpTileCount += element[3];
        });


        Output("Saved properties data from:  " + PropertiesDataDate + " (" + MapProperties.length + " properties | " + TmpTileCount + " tiles)<br>");
    }


    Output(`<!-- <b>Profil upgrade settings:</b><br><br> -->


<div style='text-align: left;'>
   <label style="position: relative; display: inline-block; width: 23%; margin-left: 25% ">
         <input id="checkbox_profilupgrade_properties" style="opacity: 0; width: 0; height: 0;" type="checkbox">
         <span style="color: black; font-size: 14px">Show advanced property data</span>
    </label>

    <label style="position: relative; display: inline-block; width: 23%; margin-left: 10%">
         <input id="checkbox_profilupgrade_profile" style="opacity: 0; width: 0; height: 0;" type="checkbox">
         <span style="color: black; font-size: 14px">Show advanced profile data</span>
    </label><br>



    <label style="position: relative; display: inline-block; width: 23%; margin-left: 30%">
         <input id="checkbox_profilupgrade_properties_resindicator" style="opacity: 0; width: 0; height: 0;" type="checkbox">
         <span style="color: black; font-size: 14px">Resources indicator</span>
    </label>
     <label style="position: relative; display: inline-block; width: 23%; margin-left: 10%">
         <input id="checkbox_profilupgrade_profile_resdata" style="opacity: 0; width: 0; height: 0;" type="checkbox">
         <span style="color: black; font-size: 14px">Resources data</span>
    </label><br>

    <label style="position: relative; display: inline-block; width: 23%; margin-left: 30%">
         <input id="checkbox_profilupgrade_properties_holoindicator" style="opacity: 0; width: 0; height: 0;" type="checkbox">
         <span style="color: black; font-size: 14px">Holobuilding indicator</span>
    </label>
    <label style="position: relative; display: inline-block; width: 23%; margin-left: 10%">
         <input id="checkbox_profilupgrade_profile_holodata" style="opacity: 0; width: 0; height: 0;" type="checkbox">
         <span style="color: black; font-size: 14px">Holobuilding data</span>
    </label><br>

    <label style="position: relative; display: inline-block; width: 23%; margin-left: 30%">
         <input id="checkbox_profilupgrade_properties_id" style="opacity: 0; width: 0; height: 0;" type="checkbox">
         <span style="color: black; font-size: 14px">Property ID</span>
    </label>
    <label style="position: relative; display: inline-block; width: 23%; margin-left: 10%">
         <input id="checkbox_profilupgrade_profile_saveddata" style="opacity: 0; width: 0; height: 0;" type="checkbox">
         <span style="color: black; font-size: 14px">Local saved property data</span>
    </label><br>

    <label style="position: relative; display: inline-block; width: 23%; margin-left: 30%">
         <input id="checkbox_profilupgrade_properties_class" style="opacity: 0; width: 0; height: 0;" type="checkbox">
         <span style="color: black; font-size: 14px">Property class</span>
    </label><br>
    <label style="position: relative; display: inline-block; width: 23%; margin-left: 30%">
         <input id="checkbox_profilupgrade_properties_resdata" style="opacity: 0; width: 0; height: 0;" type="checkbox">
         <span style="color: black; font-size: 14px">Resources data</span>
    </label><br>
    <label style="position: relative; display: inline-block; width: 23%; margin-left: 30%">
         <input id="checkbox_profilupgrade_properties_holodata" style="opacity: 0; width: 0; height: 0;" type="checkbox">
         <span style="color: black; font-size: 14px">Holobuilding space</span>
    </label><br>
    <label style="position: relative; display: inline-block; width: 23%; margin-left: 30%">
         <input id="checkbox_profilupgrade_properties_transfessence" style="opacity: 0; width: 0; height: 0;" type="checkbox">
         <span style="color: black; font-size: 14px">Transformed essence</span>
    </label><br><br><br>


    

</div> `);





     if(localStorage.getItem('E2MultiTool_ProfilUpgrade_Profile') == 1)
       {
            document.getElementById("checkbox_profilupgrade_profile").checked = true;
       }
    if(localStorage.getItem('E2MultiTool_ProfilUpgrade_Properties') == 1)
       {
            document.getElementById("checkbox_profilupgrade_properties").checked = true;
       }
    if(localStorage.getItem('E2MultiTool_ProfilUpgrade_Properties_ResIndicator') == 1)
       {
            document.getElementById("checkbox_profilupgrade_properties_resindicator").checked = true;
       }
    if(localStorage.getItem('E2MultiTool_ProfilUpgrade_Properties_HoloIndicator') == 1)
       {
            document.getElementById("checkbox_profilupgrade_properties_holoindicator").checked = true;
       }
    if(localStorage.getItem('E2MultiTool_ProfilUpgrade_Profile_ResData') == 1)
       {
            document.getElementById("checkbox_profilupgrade_profile_resdata").checked = true;
       }
    if(localStorage.getItem('E2MultiTool_ProfilUpgrade_Profile_HoloData') == 1)
       {
            document.getElementById("checkbox_profilupgrade_profile_holodata").checked = true;
       }
    if(localStorage.getItem('E2MultiTool_ProfilUpgrade_Profile_SavedData') == 1)
       {
            document.getElementById("checkbox_profilupgrade_profile_saveddata").checked = true;
       }
    if(localStorage.getItem('E2MultiTool_ProfilUpgrade_Properties_ID') == 1)
       {
            document.getElementById("checkbox_profilupgrade_properties_id").checked = true;
       }
    if(localStorage.getItem('E2MultiTool_ProfilUpgrade_Properties_Class') == 1)
       {
            document.getElementById("checkbox_profilupgrade_properties_class").checked = true;
       }
    if(localStorage.getItem('E2MultiTool_ProfilUpgrade_Properties_ResData') == 1)
       {
            document.getElementById("checkbox_profilupgrade_properties_resdata").checked = true;
       }
    if(localStorage.getItem('E2MultiTool_ProfilUpgrade_Properties_HoloData') == 1)
       {
            document.getElementById("checkbox_profilupgrade_properties_holodata").checked = true;
       }
    if(localStorage.getItem('E2MultiTool_ProfilUpgrade_Properties_TransfEssence') == 1)
       {
            document.getElementById("checkbox_profilupgrade_properties_transfessence").checked = true;
       }




    $("#Button_FeatureResourcesListGetData").click({param1: "1"},LoadMapProperties);


    //Checkboxes
     $('#checkbox_profilupgrade_properties').change(function()
     {
        if(this.checked)
        {
            localStorage.setItem('E2MultiTool_ProfilUpgrade_Properties','1');
        }
        else
        {
            localStorage.setItem('E2MultiTool_ProfilUpgrade_Properties','0');
        }
    });

     $('#checkbox_profilupgrade_profile').change(function()
     {
        if(this.checked)
        {
            localStorage.setItem('E2MultiTool_ProfilUpgrade_Profile','1');
        }
        else
        {
            localStorage.setItem('E2MultiTool_ProfilUpgrade_Profile','0');
        }
    });
     $('#checkbox_profilupgrade_properties_resindicator').change(function()
     {
        if(this.checked)
        {
            localStorage.setItem('E2MultiTool_ProfilUpgrade_Properties_ResIndicator','1');
        }
        else
        {
            localStorage.setItem('E2MultiTool_ProfilUpgrade_Properties_ResIndicator','0');
        }
    });
     $('#checkbox_profilupgrade_properties_holoindicator').change(function()
     {
        if(this.checked)
        {
            localStorage.setItem('E2MultiTool_ProfilUpgrade_Properties_HoloIndicator','1');
        }
        else
        {
            localStorage.setItem('E2MultiTool_ProfilUpgrade_Properties_HoloIndicator','0');
        }
    });
     $('#checkbox_profilupgrade_profile_resdata').change(function()
     {
        if(this.checked)
        {
            localStorage.setItem('E2MultiTool_ProfilUpgrade_Profile_ResData','1');
        }
        else
        {
            localStorage.setItem('E2MultiTool_ProfilUpgrade_Profile_ResData','0');
        }
    });
    $('#checkbox_profilupgrade_profile_holodata').change(function()
     {
        if(this.checked)
        {
            localStorage.setItem('E2MultiTool_ProfilUpgrade_Profile_HoloData','1');
        }
        else
        {
            localStorage.setItem('E2MultiTool_ProfilUpgrade_Profile_HoloData','0');
        }
    });
    $('#checkbox_profilupgrade_profile_saveddata').change(function()
     {
        if(this.checked)
        {
            localStorage.setItem('E2MultiTool_ProfilUpgrade_Profile_SavedData','1');
        }
        else
        {
            localStorage.setItem('E2MultiTool_ProfilUpgrade_Profile_SavedData','0');
        }
    });
    $('#checkbox_profilupgrade_properties_id').change(function()
     {
        if(this.checked)
        {
            localStorage.setItem('E2MultiTool_ProfilUpgrade_Properties_ID','1');
        }
        else
        {
            localStorage.setItem('E2MultiTool_ProfilUpgrade_Properties_ID','0');
        }
    });
    $('#checkbox_profilupgrade_properties_class').change(function()
     {
        if(this.checked)
        {
            localStorage.setItem('E2MultiTool_ProfilUpgrade_Properties_Class','1');
        }
        else
        {
            localStorage.setItem('E2MultiTool_ProfilUpgrade_Properties_Class','0');
        }
    });
    $('#checkbox_profilupgrade_properties_resdata').change(function()
     {
        if(this.checked)
        {
            localStorage.setItem('E2MultiTool_ProfilUpgrade_Properties_ResData','1');
        }
        else
        {
            localStorage.setItem('E2MultiTool_ProfilUpgrade_Properties_ResData','0');
        }
    });
    $('#checkbox_profilupgrade_properties_holodata').change(function()
     {
        if(this.checked)
        {
            localStorage.setItem('E2MultiTool_ProfilUpgrade_Properties_HoloData','1');
        }
        else
        {
            localStorage.setItem('E2MultiTool_ProfilUpgrade_Properties_HoloData','0');
        }
    });
     $('#checkbox_profilupgrade_properties_transfessence').change(function()
     {
        if(this.checked)
        {
            localStorage.setItem('E2MultiTool_ProfilUpgrade_Properties_TransfEssence','1');
        }
        else
        {
            localStorage.setItem('E2MultiTool_ProfilUpgrade_Properties_TransfEssence','0');
        }
    });






}



async function FeatureProfileUpgrade()
{

    //console.log("Test");

    if (localStorage.getItem('E2MultiTool_ProfilUpgradeActive') == "1")
    {

         while(document.querySelectorAll('.styles_card__3NmKS')[0] == null)
         {
             //console.log("Page not full loaded, wait 300ms");
             await timeout(300);
         }

        await timeout(500);

        //Check if own profile
        if(document.location.href.replace("https://app.earth2.io/#profile/","") == localStorage.getItem('E2MultiTool_UserID'))
        {

                //Profile data
                if(document.querySelectorAll('#ProfileDataDIV')[0] == null && localStorage.getItem('E2MultiTool_ProfilUpgrade_Profile') == "1")
                {
                    AddProfilData();
                }

                //Properties data
                if(document.querySelectorAll('.PropertyDataDIV')[0] == null && localStorage.getItem('E2MultiTool_ProfilUpgrade_Properties') == "1")
                {

                    AddPropertyData();

                }
        }

    }

}



function FeatureProfileUpgradeHelp()
{
    ClearOutput();
    Output(`<br>
    <br>
    This function adds more information about your profile and you properties to you profile page. <br>
    Like resources data, holobuildings Data, resources- and holobuildingsindicator, transformed essence, propertie class, etc., etc. <br>
    It only works for your profile and your properties. <br><br>

    At first you need to request you profile and properties data from E2, therefore run the "Load/Update properties data" function. (You find it under settings)<br>
    Attention: This takes time, it could take up to several hours. But you only need to run it once, thereafter the data is saved local on your browser.<br>
    The data is still there after a reload of the webpage or if you restart your browser/pc.
    <br>
    <br>
    You can choose and change the displayed profile data under settings next to the function button.<br>
    Just check/uncheck the data you need.

    `);
}


async function AddProfilData()
{
        var DivProfileData = document.createElement ('div');
        DivProfileData.style = " top:5px; left: 5px";
        DivProfileData.setAttribute('id', 'ProfileDataDIV');


        if(localStorage.getItem('E2MultiTool_Properties') == null)
        {
            DivProfileData.innerHTML += `<br><b>No saved properties data: Load/update properties data under settings`;
        }
        else
        {
            MapProperties = JSON.parse(localStorage.getItem('E2MultiTool_Properties'));

            var ResCount = 5;
            var TileCount = 0;
            var HoloSpaceCount = 0;
            var HoloBuildingsCount = 0;
            var ResourceTilesCounter = Array(ResCount).fill(0);
            var ResourcePropertiesCounter = Array(ResCount).fill(0);
            MapProperties.forEach(function(element)
            {
                //ScriptIsWorking(1);
                //id, Titel, Tier [2],size,location,coordinates1,coordinates2, holo,res_gold,res_oil,res_limestone,res_iron,res_coal, class[13], for sale, holo m3 [15], transformed essence [16]
                TileCount += element[3];
                if(element[8]){ResourcePropertiesCounter[0]++; ResourceTilesCounter[0] += element[3];} //Gold
                if(element[9]){ResourcePropertiesCounter[1]++; ResourceTilesCounter[1] += element[3];} //Oil
                if(element[10]){ResourcePropertiesCounter[2]++; ResourceTilesCounter[2] += element[3];} //Limestone
                if(element[11]){ResourcePropertiesCounter[3]++; ResourceTilesCounter[3] += element[3];} //Iron-ore
                if(element[12]){ResourcePropertiesCounter[4]++; ResourceTilesCounter[4] += element[3];} //Coal

                if(element[7] != null){HoloBuildingsCount++; HoloSpaceCount += element[15];} //Holo


            });

            if(localStorage.getItem('E2MultiTool_ProfilUpgrade_Profile_ResData') == "1")
            {
                DivProfileData.innerHTML = "<br><b>Resources:</b> <hr style='width: 100%;border-top: 2px dashed black;'>Gold: " + ResourcePropertiesCounter[0] + " Properties/" + ResourceTilesCounter[0] + " Tiles &emsp;&emsp;&emsp;&emsp;&emsp; Oil:  " + ResourcePropertiesCounter[1] + " Properties/" + ResourceTilesCounter[1] + " Tiles<br>Coal:  " + ResourcePropertiesCounter[4] + " Properties/" + ResourceTilesCounter[4] + " Tiles &emsp;&emsp;&emsp;&emsp;&emsp; Iron-Ore:  " + ResourcePropertiesCounter[3] + " Properties/" + ResourceTilesCounter[3] + " Tiles <br>Limestone:  " + ResourcePropertiesCounter[2] + " Properties/" + ResourceTilesCounter[2] + " Tiles ";
            }

            if(localStorage.getItem('E2MultiTool_ProfilUpgrade_Profile_HoloData') == "1")
            {
                DivProfileData.innerHTML += "<br><br><b>Holobuildings:</b> <hr style='width: 100%;border-top: 2px dashed black;'>Total holobuildings: " + HoloBuildingsCount + " &emsp;&emsp; Total space: " + HoloSpaceCount.toFixed(2) + "m3";
            }
            //DivProfileData.innerHTML += "<br><br><b>Jewels:</b> <hr style='width: 100%;border-top: 2px dashed black;'>Total: xxxx <br>Inventory: xxxx &emsp;&emsp;&emsp;&emsp;&emsp; Bazaar: xxxx &emsp;&emsp;&emsp;&emsp;&emsp; For sale. xxxx";

            if(localStorage.getItem('E2MultiTool_ProfilUpgrade_Profile_SavedData') == "1")
            {
                DivProfileData.innerHTML += "<br><br><b>Data:</b> <hr style='width: 100%;border-top: 2px dashed black;'>";
                DivProfileData.innerHTML += "Saved properties data from:  " + PropertiesDataDate + "<br>(" + MapProperties.length + " properties | " + TileCount + " tiles)<br>";
                DivProfileData.innerHTML += '<button id="Button_ProfilUpgrade_DownloadPropertiesAsCSV" style="width:35%; border: 1px solid black; background:lightgrey">Download as CSV</button><br><br>';
            }
        }







        document.getElementsByClassName('styles_username__v99Rj')[0].parentElement.append(DivProfileData);
    $("#Button_ProfilUpgrade_DownloadPropertiesAsCSV").click (DownloadSavedPropertiesDataAsCSV);

}



async function AddPropertyData()
{

    var propertycard = document.querySelectorAll('.styles_card__3NmKS');
    //console.log(propertycard[0]);

     if(localStorage.getItem('E2MultiTool_Properties') != null)
    {
        MapProperties = JSON.parse(localStorage.getItem('E2MultiTool_Properties'));
    }

    //Properties data
   // console.log( "ready!" );

     propertycard.forEach(element => {


            var TmpDIV = document.createElement ('div');
            TmpDIV.style = " top:5px; left: 5px; margin-top: -10px; font-size:17px";
            TmpDIV.setAttribute('class', 'PropertyDataDIV');
            var TmpPropertyID = element.firstChild.href.replace("https://app.earth2.io/#propertyInfo/","");


         MapProperties.forEach(function(element2) {

             if(element2[0] == TmpPropertyID)
             {

                 //TmpDIV.innerHTML = "Show more Infos for " + TmpPropertyID ;

                 var TmpData = "<table>";

                 //ID
                 if(localStorage.getItem('E2MultiTool_ProfilUpgrade_Properties_ID') == "1")
                 {
                     TmpData += "<tr><td style='width: 30%; padding:20px 0px 0px 5px;'>ID:</td><td style='padding:20px 0px 0px 0px;font-size:15px'> " + TmpPropertyID + "</td></tr>";
                 }

                 if(element2[2] == "1" && localStorage.getItem('E2MultiTool_ProfilUpgrade_Properties_Class') == "1") //Show class if T1
                 {
                     TmpData += "<tr><td style='padding:0; padding-left: 5px;'>Class: </td><td style='padding:0'>C" + element2[13] + "</td></tr>";
                 }

                 //Resources
                 if(localStorage.getItem('E2MultiTool_ProfilUpgrade_Properties_ResData') == "1")
                 {
                     if(element2[8] || element2[9] || element2[10] || element2[11] || element2[12])  //If resource exist
                     {
                         TmpData += "<tr><td style='padding:0; padding-left: 5px;'>Resources:</td> <td style='padding:0'>";
                         var TmpText = "";

                         if(element2[8]){if(TmpText == ""){TmpText += "Gold"; }else{TmpText += ", Gold";}} //Gold
                         if(element2[9]){if(TmpText == ""){TmpText += "Oil"; }else{TmpText += ", Oil";}} //Oil
                         if(element2[10]){if(TmpText == ""){TmpText += "Limestone"; }else{TmpText += ", Limestone";}} //Limestone
                         if(element2[11]){if(TmpText == ""){TmpText += "Iron-Ore"; }else{TmpText += ", Iron-Ore";}} //Iron-Ore
                         if(element2[12]){if(TmpText == ""){TmpText += "Coal"; }else{TmpText += ", Coal";}} //Coal


                         TmpData += TmpText + "</td></tr>";
                     }
                 }

                //Holo
                 if(element2[15] != null && localStorage.getItem('E2MultiTool_ProfilUpgrade_Properties_HoloData') == "1")
                 {
                     TmpData += "<tr><td style='padding:0; padding-left: 5px;'>Holobuilding:</td> <td style='padding:0'>" + element2[15] + "m3</td></tr>";
                 }

                 //If Einbauen wenn epl
                 // TmpData += "<tr><td style='padding:0'>EPL:</td> <td style='padding:0'>Testepl</td></tr>";

                 //If Einbauen wenn transfromed essence
                 if(element2[16] != null && localStorage.getItem('E2MultiTool_ProfilUpgrade_Properties_TransfEssence') == "1")
                 {
                     TmpData += "<tr><td style='padding:0; padding-left: 5px;'>Transformed Essence:</td> <td style='padding:0'>" + element2[16] + "</td></tr>";
                 }

                 //if einbauen
                 //TmpData += "<tr><td style='padding:0'>Sloted jewels:</td> <td style='padding:0'>3: T1 black, T1 green, T2 green</td></tr>";


                 TmpData+= "</table>";

                 TmpDIV.innerHTML = TmpData;
                 element.append(TmpDIV);



                 //Res Indikator
                 if(localStorage.getItem('E2MultiTool_ProfilUpgrade_Properties_ResIndicator') == "1")
                 {
                     TmpDIV = document.createElement ('div');
                     TmpDIV.style = " position: absolute; bottom: 5%; left: 32%; height: 10%; width: 30%";
                     TmpDIV.setAttribute('class', 'PropertyDataIndicatorResDIV');
                     TmpDIV.innerHTML = "";
                     if(element2[8]){TmpDIV.innerHTML += "<img title='Gold' style='display: inline-block; width: 16%;' src='" + IMGMarkerYellowCircle + "'></img>&emsp;";} //Gold
                     if(element2[9]){TmpDIV.innerHTML += "<img title='Oil' style='display: inline-block; width: 16%;' src='" + IMGMarkerBlackCircle + "'></img>&emsp;";} //Oil
                     if(element2[12]){TmpDIV.innerHTML += "<img title='Coal' style='display: inline-block; width: 16%;' src='" + IMGMarkerDarkGreyCircle + "'></img>&emsp;";} //Coal
                     if(element2[10]){TmpDIV.innerHTML += "<img title='Limestone' style='display: inline-block; width: 16%;' src='" + IMGMarkerGreyCircle + "'></img>&emsp;";} //Limestone
                     if(element2[11]){TmpDIV.innerHTML += "<img title='Iron-Ore' style='display: inline-block; width: 16%;' src='" + IMGMarkerRedCircle + "'></img>&emsp;";} //Iron-Ore
                     element.firstChild.firstChild.append(TmpDIV);
                 }

                 //Holo Indikator
                 if(localStorage.getItem('E2MultiTool_ProfilUpgrade_Properties_HoloIndicator') == "1")
                 {
                     TmpDIV = document.createElement ('div');
                     TmpDIV.style = " position: absolute; bottom: 6.5%; right: 24%; width: 8%; height: 13%";
                     TmpDIV.setAttribute('class', 'PropertyDataIndicatorResDIV');
                     TmpDIV.innerHTML = "<img src= 'data:image/png;base64,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'><img>";

                     //console.log(element2[7]);
                     if(element2[7] != null) //Only if holo exists
                     {
                         element.firstChild.firstChild.append(TmpDIV);
                     }
                 }
             }

         });



            


       });
}




async function DownloadSavedPropertiesDataAsCSV()
{


 if(localStorage.getItem('E2MultiTool_PropertiesDataDate') != null)
   {
       var data = JSON.parse(localStorage.getItem('E2MultiTool_Properties'));

       var csvContent = "data:text/csv;charset=utf-8,";
       csvContent += "ID,titel,tier,tiles,location,latitude,longitude, holobuilding ID,res_gold,res_oil,res_limestone,res_iron,res_coal, class, for sale, holo space (m3), transformed essence\r\n";

       csvContent += data.map(rowArray => rowArray.join(",")).join("\r\n");

       //var encodedUri = encodeURI(csvContent);
       //window.open(encodedUri);


       var DownloadLink = document.createElement("a");
       DownloadLink.href = csvContent;
       DownloadLink.download = "E2Multitool_Properties(" + localStorage.getItem('E2MultiTool_PropertiesDataDate').replace(':','-').replace(' ','_') + ").csv";

       document.body.appendChild(DownloadLink);
       DownloadLink.click();
       document.body.removeChild(DownloadLink);
   }
   else
   {
       ClearOutput();
       Output(`
       <br><br>Error: No properties data saved local! <br>Please load data first: <br>
       <button id="Button_GetData" style="width:30%; border: 1px solid black; background:lightgrey">Load/update properties data</button>
       `);
       $("#Button_GetData").click({param1: "1"},LoadMapProperties);
   }


}



function MinimizeMaximize()
    {
        var MinimizeMaximizeMenu = document.getElementById("MaximizeMenu");
        var E2Multitool = document.getElementById("E2Multitool");

        if (MinimizeMaximizeMenu.style.display == "none")
        {
            MinimizeMaximizeMenu.style.display = "block";
            E2Multitool.style.display = "none";
            localStorage.setItem('E2MultiTool_IsMinmized','1');
        } else
        {
            MinimizeMaximizeMenu.style.display = "none";
            E2Multitool.style.display = "block";
            localStorage.setItem('E2MultiTool_IsMinmized','0');
        }

    }




async function MainFunction()
{



    //Show loading
    var LoadingDIV = document.createElement ('div');
    LoadingDIV.innerHTML ='<div id="loading" style="width:100%; border: 5px solid red; text-align:center; font-size: 18px">LOADING...</div>'
    document.body.prepend(LoadingDIV);




    var ScriptHTML = document.createElement ('div');
    ScriptHTML.innerHTML =
        `<link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">

        <div id="E2Multitool" style="border: 8px ridge green; background-color: rgba(51, 170, 51, .3)">
              <div style="width:100%; text-align:center "> <u><b>E2 Multitool by ExKcir</b></u><br><br> </div>

              <div  style="width:100%;display: block; align-items: stretch; text-align:center; margin-top: -20px; font-size: 14px">
                        
                  <div  style="width:25%; text-align:center; float: left">
 
                       <button id="Button_JewelHarvestHelper" style="width:40%; border: 1px solid black; background:lightgrey">Jewel harvest helper </button>
                       <button id="Button_JewelHarvestHelperHelp" style="width:5%; border: 1px solid black; background:lightgrey"> ? </button> &nbsp; &nbsp;

                       <button id="Button_HoloBuildingsList" style="width:40%; border: 1px solid black; background:lightgrey">Holobuildings list</button>
                       <button id="Button_HoloBuildingsListHelp" style="width:5%; border: 1px solid black; background:lightgrey"> ? </button> <br>

                       <button id="Button_JewelCounter" style="width:40%; border: 1px solid black; background:lightgrey">Jewel counter</button>
                       <button id="Button_JewelCounterHelp" style="width:5%; border: 1px solid black; background:lightgrey"> ? </button> &nbsp; &nbsp;

                       <button id="Button_JewelCounterPlus" style="width:40%; border: 1px solid black; background:lightgrey">Jewel counter + list</button>
                       <button id="Button_JewelCounterPlusHelp" style="width:5%; border: 1px solid black; background:lightgrey"> ? </button> <br>

                       <button id="Button_JewelPricesT1" style="width:40%; border: 1px solid black; background:lightgrey">Jewel prices (T1)</button>
                       <button id="Button_JewelPricesT1Help" style="width:5%; border: 1px solid black; background:lightgrey"> ? </button> &nbsp; &nbsp;

                       <button id="Button_JewelPricesT1Cracked" style="width:40%; border: 1px solid black; background:lightgrey">Jewel prices (T1 Cra.)</button>
                       <button id="Button_JewelPricesT1CrackedHelp" style="width:5%; border: 1px solid black; background:lightgrey"> ? </button> <br>

                       <button id="Button_JewelPricesT1Common" style="width:40%; border: 1px solid black; background:lightgrey">Jewel prices (T1 Com.)</button>
                       <button id="Button_JewelPricesT1CommonHelp" style="width:5%; border: 1px solid black; background:lightgrey"> ? </button> &nbsp; &nbsp;

                       <button id="Button_JewelPricesT2" style="width:40%; border: 1px solid black; background:lightgrey">Jewel prices (T2)</button>
                       <button id="Button_JewelPricesT2Help" style="width:5%; border: 1px solid black; background:lightgrey"> ? </button> <br>

                       <button id="Button_JewelPricesT3" style="width:40%; border: 1px solid black; background:lightgrey">Jewel prices (T3)</button>
                       <button id="Button_JewelPricesT3Help" style="width:5%; border: 1px solid black; background:lightgrey"> ? </button> &nbsp; &nbsp;

                       <button id="Button_JewelPricesAll" style="width:40%; border: 1px solid black; background:lightgrey">Jewel prices (All)</button>
                       <button id="Button_JewelPricesAllHelp" style="width:5%; border: 1px solid black; background:lightgrey"> ? </button> <br>

                       <button id="Button_HolobuildingData" style="width:40%; border: 1px solid black; background:lightgrey">Holobuilding data </button>
                       <button id="Button_HolobuildingDataHelp" style="width:5%; border: 1px solid black; background:lightgrey"> ? </button> &nbsp; &nbsp;

                       <button id="Button_PropertiesCounter" style="width:40%; border: 1px solid black; background:lightgrey">Properties/tiles counter</button>
                       <button id="Button_PropertiesCounterHelp" style="width:5%; border: 1px solid black; background:lightgrey"> ? </button> <br>

                       <button id="Button_PropertiesSizeList" style="width:40%; border: 1px solid black; background:lightgrey">Properties sizes list</button>
                       <button id="Button_PropertiesSizeListHelp" style="width:5%; border: 1px solid black; background:lightgrey"> ? </button> &nbsp; &nbsp;

                       <button id="Button_ProfitCalc" style="width:40%; border: 1px solid black; background:lightgrey">Profit calculator</button>
                       <button id="Button_ProfitCalcHelp" style="width:5%; border: 1px solid black; background:lightgrey"> ? </button> <br>

                       <!-- <button id="Button_ProfitCalcCredits" style="width:40%; border: 1px solid black; background:lightgrey">Profit calculator (Credits)</button>
                       <button id="Button_ProfitCalcCreditsHelp" style="width:5%; border: 1px solid black; background:lightgrey"> ? </button> <br> -->

                       <button id="Button_OpenBids" style="width:24%; border: 1px solid black; background:lightgrey">Open Bids</button>
                       <button id="Button_OpenBidsHelp" style="width:5%; border: 1px solid black; background:lightgrey"> ? </button> &nbsp; &nbsp;

                       <button id="Button_EssenceData" style="width:24%; border: 1px solid black; background:lightgrey">Essence data</button>
                       <button id="Button_EssenceDataHelp" style="width:5%; border: 1px solid black; background:lightgrey"> ? </button> &nbsp; &nbsp;

                       <button id="Button_LITData" style="width:24%; border: 1px solid black; background:lightgrey">LIT data</button>
                       <button id="Button_LITDataHelp" style="width:5%; border: 1px solid black; background:lightgrey"> ? </button> <br>

                       <button id="Button_RefIncomeCalc" style="width:40%; border: 1px solid black; background:lightgrey">(Ref-Code)Income</button>
                       <button id="Button_RefIncomeCalcHelp" style="width:5%; border: 1px solid black; background:lightgrey"> ? </button> &nbsp; &nbsp;

                       <button id="Button_DepositsAndWithdrawalData" style="width:40%; border: 1px solid black; background:lightgrey">Deposits/withdrawals</button>
                       <button id="Button_DepositsAndWithdrawalDataHelp" style="width:5%; border: 1px solid black; background:lightgrey"> ? </button> <br>

                       <button id="Button_PropertiesMap" style="width:40%; border: 1px solid black; background:lightgrey">Properties map</button>
                       <button id="Button_PropertiesMapHelp" style="width:5%; border: 1px solid black; background:lightgrey"> ? </button> &nbsp; &nbsp;

                       <button id="Button_ResourcesList" style="width:40%; border: 1px solid black; background:lightgrey">Resources list</button>
                       <button id="Button_ResourcesListHelp" style="width:5%; border: 1px solid black; background:lightgrey"> ? </button> <br>

                       <!-- <button id="Button_ListEPLS" style="width:40%; border: 1px solid black; background:lightgrey">List my EPL's</button>
                       <button id="Button_ListEPLSHelp" style="width:5%; border: 1px solid black; background:lightgrey"> ? </button> &nbsp; &nbsp;

                       <button id="Button_ListEPLS" style="width:40%; border: 1px solid black; background:lightgrey">Staked essence Counter</button>
                       <button id="Button_ListEPLSHelp" style="width:5%; border: 1px solid black; background:lightgrey"> ? </button> <br> -->

                       <!--<button id="Button_DepositsAndWithdrawalData" style="width:40%; border: 1px solid black; background:lightgrey">Download data as .csv</button>
                       <button id="Button_DepositsAndWithdrawalDataHelp" style="width:5%; border: 1px solid black; background:lightgrey"> ? </button> <br> -->

                       <br>

                       <label style="position: relative; display: inline-block; width: 40%; ">
                       <input id="checkbox_speedthrottling" style="opacity: 0; width: 0; height: 0;" type="checkbox">
                       <span style="color: black; font-size: 14px">Speed throttling</span>
                       </label>
                       <button id="Button_SpeedThrottlingHelp" style="width:5%; border: 1px solid black; background:lightgrey"> ? </button> <br>

                       <label style="position: relative; display: inline-block; width: 40%; ">
                       <input id="checkbox_profilupgrade" style="opacity: 0; width: 0; height: 0;" type="checkbox">
                       <span style="color: black; font-size: 14px">Profile upgrade</span>
                       </label>
                       <button id="Button_ProfilUpgradeSettings" style="width:15%; border: 1px solid black; background:lightgrey">Settings</button>
                       <button id="Button_ProfilUpgradeHelp" style="width:5%; border: 1px solid black; background:lightgrey"> ? </button> <br>

                       <br>
                       <button id="Button_Minimize" style="width:40%; border: 1px solid black; background:lightgrey">Minimize E2 Multitool</button>

                  </div>

<div style="display: block; float: left; width: 50%">
                  <div id="ScriptTextOutput" style="width: 100%; height: 318px; text-align:center; background-color: rgba(100, 100, 100,0.8); border: 5px ridge black; overflow: auto; float:left; font-size:16px">
                  <br><br><br><br>
                  <b>
                      Script was started successfully <br>
                      <br>
                      To start a function click the grey button left. <br>
                      To get the description of a function click the "?"-Button next to it.
                      </b>
                  </div>

                  <div id="LoadingBox" style="font-weight: bold ; width: 100%; height: 32px;  text-align:center; background-color: green; border: 5px ridge black; clear: both; margin-top: 5px; display:inline-block; margin-bottom: 5px; font-size: 16px;">Script is ready</div>
</div>

                  <div  style="width:25%;  text-align:center; float: right; font-size: 14px";>
<br>
<button id="Button_PropertiesMapGetProperties" style="width:50%; border: 1px solid black; background:lightgrey">Load/update properties data</button><br>
<button id="Button_DownloadPropertiesAsCSV" style="width:50%; border: 1px solid black; background:lightgrey">Download saved properties data as CSV</button>
<br>
<br>
<br>
For questions, suggestions and bug report you can contact me on discord: <br>
ExKcir#1454
<br>
<br>
<br>
To support my work you can use my E2 referral code (7,5%): <br>
E2Multitool <!-- &nbsp;
<button id="Button_CopyRef" style="padding: 3 px; width:33px; border: 1px solid black; background:lightgrey; font-size: 12px">COPY</button> -->
<br>
<br>
<br>
<br>
Version: ` + version  + /* `<br>Latest version: ` + LatestVersion + */`<br>You can download the latest version here: <a style="color: darkblue" href="https://github.com/ExKcir/Earth2Scripts/tree/main/English/E2Multitool">Github E2Multitool</a>
                  </div>

                  <div  style="width:1%; text-align:center; clear: left;">

                  </div>


               </div>
          </div>`;




        document.getElementById("loading").style.display = "none"; //Remove loading DIV
        document.body.prepend(ScriptHTML); //Show Output



    //maximize menu
     var MaximizeMenu = document.createElement ('div');
    MaximizeMenu.innerHTML =
        `<button id="MaximizeMenu" style="border: 5px solid green; position: fixed; left: 0; right: 0; width: 10%; margin-left: auto; margin-right: auto; text-align: center;  background-color: lightgrey; font-weight: bold;z-index: 10000;">Open E2 Multitool</button>`;
     document.body.prepend(MaximizeMenu); //Show maximize button
    document.getElementById("MaximizeMenu").style.display = "none";

    if(localStorage.getItem('E2MultiTool_IsMinmized') == 1)
       {
             document.getElementById("MaximizeMenu").style.display = "block";
             document.getElementById("E2Multitool").style.display = "none";
       }

     if (localStorage.getItem('E2MultiTool_IsSpeedThrottlingActive') == null) {
            localStorage.setItem('E2MultiTool_IsSpeedThrottlingActive','1');
        }

    if (localStorage.getItem('E2MultiTool_ProfilUpgradeActive') == null) {
            localStorage.setItem('E2MultiTool_ProfilUpgradeActive','0');
        }

    if(localStorage.getItem('E2MultiTool_IsSpeedThrottlingActive') == 1)
       {
            document.getElementById("checkbox_speedthrottling").checked = true;
       }
    if(localStorage.getItem('E2MultiTool_ProfilUpgradeActive') == 1)
       {
            document.getElementById("checkbox_profilupgrade").checked = true;
       }
     if (localStorage.getItem('E2MultiTool_ignoresingles') == null) {
            localStorage.setItem('E2MultiTool_ignoresingles','1');
        }

    if(localStorage.getItem('E2MultiTool_PropertiesDataDate') != null)
   {
       PropertiesDataDate = localStorage.getItem('E2MultiTool_PropertiesDataDate');
   }
   else
   {
       if(localStorage.getItem('E2MultiTool_Properties') != null)
       {
           PropertiesDataDate = "Unknown";
       }
       else
       {
           PropertiesDataDate = "No data";
       }
   }


    if (localStorage.getItem('E2MultiTool_ProfilUpgrade_Profile') == null) {
            localStorage.setItem('E2MultiTool_ProfilUpgrade_Profile','1');
        }
    if (localStorage.getItem('E2MultiTool_ProfilUpgrade_Properties') == null) {
            localStorage.setItem('E2MultiTool_ProfilUpgrade_Properties','1');
        }
    if (localStorage.getItem('E2MultiTool_ProfilUpgrade_Profile_ResData') == null) {
            localStorage.setItem('E2MultiTool_ProfilUpgrade_Profile_ResData','1');
        }
    if (localStorage.getItem('E2MultiTool_ProfilUpgrade_Profile_HoloData') == null) {
            localStorage.setItem('E2MultiTool_ProfilUpgrade_Profile_HoloData','1');
        }
    if (localStorage.getItem('E2MultiTool_ProfilUpgrade_Profile_SavedData') == null) {
            localStorage.setItem('E2MultiTool_ProfilUpgrade_Profile_SavedData','1');
        }
    if (localStorage.getItem('E2MultiTool_ProfilUpgrade_Properties_ID') == null) {
            localStorage.setItem('E2MultiTool_ProfilUpgrade_Properties_ID','1');
        }
    if (localStorage.getItem('E2MultiTool_ProfilUpgrade_Properties_Class') == null) {
            localStorage.setItem('E2MultiTool_ProfilUpgrade_Properties_Class','1');
        }
    if (localStorage.getItem('E2MultiTool_ProfilUpgrade_Properties_ResData') == null) {
            localStorage.setItem('E2MultiTool_ProfilUpgrade_Properties_ResData','1');
        }
    if (localStorage.getItem('E2MultiTool_ProfilUpgrade_Properties_HoloData') == null) {
            localStorage.setItem('E2MultiTool_ProfilUpgrade_Properties_HoloData','1');
        }
    if (localStorage.getItem('E2MultiTool_ProfilUpgrade_Properties_ResIndicator') == null) {
            localStorage.setItem('E2MultiTool_ProfilUpgrade_Properties_ResIndicator','1');
        }
    if (localStorage.getItem('E2MultiTool_ProfilUpgrade_Properties_HoloIndicator') == null) {
            localStorage.setItem('E2MultiTool_ProfilUpgrade_Properties_HoloIndicator','1');
        }
    if (localStorage.getItem('E2MultiTool_ProfilUpgrade_Properties_TransfEssence') == null) {
            localStorage.setItem('E2MultiTool_ProfilUpgrade_Properties_TransfEssence','1');
        }





       //Buttons
    $("#Button_JewelHarvestHelper").click (FeatureJewelHarvestHelper);
    $("#Button_JewelHarvestHelperHelp").click (FeatureJewelHarvestHelperHelp);

    $("#Button_JewelCounter").click (FeatureJewelData);
    $("#Button_JewelCounterHelp").click (FeatureJewelDataHelp);

    $("#Button_JewelCounterPlus").click (FeatureJewelDataPlus);
    $("#Button_JewelCounterPlusHelp").click (FeatureJewelDataPlusHelp);

    $("#Button_JewelPricesT1").click (FeatureJewelPricesT1);
    $("#Button_JewelPricesT1Help").click (FeatureJewelPricesT1Help);

    $("#Button_JewelPricesT1Cracked").click (FeatureJewelPricesT1Cracked);
    $("#Button_JewelPricesT1CrackedHelp").click (FeatureJewelPricesT1CrackedHelp);

    $("#Button_JewelPricesT1Common").click (FeatureJewelPricesT1Common);
    $("#Button_JewelPricesT1CommonHelp").click (FeatureJewelPricesT1CommonHelp);

    $("#Button_JewelPricesT2").click (FeatureJewelPricesT2);
    $("#Button_JewelPricesT2Help").click (FeatureJewelPricesT2Help);

    $("#Button_JewelPricesT3").click (FeatureJewelPricesT3);
    $("#Button_JewelPricesT3Help").click (FeatureJewelPricesT3Help);

    $("#Button_JewelPricesAll").click (FeatureJewelPricesAll);
    $("#Button_JewelPricesAllHelp").click (FeatureJewelPricesAllHelp);

    $("#Button_HolobuildingData").click (FeatureGetHolobuildingsData);
    $("#Button_HolobuildingDataHelp").click (FeatureGetHolobuildingsDataHelp);

    $("#Button_HoloBuildingsList").click (FeatureHolobuildingsList);
    $("#Button_HoloBuildingsListHelp").click (FeatureHolobuildingsListHelp);

    $("#Button_PropertiesCounter").click (FeaturePropertiesCounter);
    $("#Button_PropertiesCounterHelp").click (FeaturePropertiesCounterHelp);

    $("#Button_PropertiesSizeList").click (FeaturePropertiesList);
    $("#Button_PropertiesSizeListHelp").click (FeaturePropertiesListHelp);

    $("#Button_ProfitCalc").click (FeatureProfitCalc);
    $("#Button_ProfitCalcHelp").click (FeatureProfitCalcHelp);

    $("#Button_OpenBids").click (FeatureOpenBids);
    $("#Button_OpenBidsHelp").click (FeatureOpenBidsHelp);

    $("#Button_Minimize").click (MinimizeMaximize);
    $("#MaximizeMenu").click (MinimizeMaximize);

    $("#Button_EssenceData").click (FeatureEssenceData);
    $("#Button_EssenceDataHelp").click (FeatureEssenceDataHelp);

    $("#Button_LITData").click (FeatureLITData);
    $("#Button_LITDataHelp").click (FeatureLITDataHelp);

    $("#Button_RefIncomeCalc").click (FeatureRefIncomeCalc);
    $("#Button_RefIncomeCalcHelp").click (FeatureRefIncomeCalcHelp);

    $("#Button_DepositsAndWithdrawalData").click (FeatureDepositsAndWithdrawalData);
    $("#Button_DepositsAndWithdrawalDataHelp").click (FeatureDepositsAndWithdrawalDataHelp);

    $("#Button_PropertiesMap").click (FeaturePropertiesMap3D);
    $("#Button_PropertiesMapHelp").click (FeaturePropertiesMapHelp);

    $("#Button_ResourcesList").click (FeatureResourcesList);
    $("#Button_ResourcesListHelp").click (FeatureResourcesListHelp);

    $("#Button_SpeedThrottlingHelp").click (FeatureSpeedThrottlingHelp);
    //$("#Button_ProfilUpgradeHelp").click (FeatureProfilUpgradeHelp);
    $("#Button_ProfilUpgradeSettings").click (FeatureProfilUpgradeSettings);
    $("#Button_ProfilUpgradeHelp").click (FeatureProfileUpgradeHelp);

    $("#Button_PropertiesMapGetProperties").click({param1: "1"},LoadMapProperties);
    $("#Button_DownloadPropertiesAsCSV").click (DownloadSavedPropertiesDataAsCSV);



    //OutputStorageAll(); //Test

    //Checkboxes
     $('#checkbox_speedthrottling').change(function()
     {
        if(this.checked)
        {
            localStorage.setItem('E2MultiTool_IsSpeedThrottlingActive','1');
        }
        else
        {
            localStorage.setItem('E2MultiTool_IsSpeedThrottlingActive','0');
        }
        //$('#textbox1').val(this.checked);
    });

    $('#checkbox_profilupgrade').change(function()
     {
        if(this.checked)
        {
            localStorage.setItem('E2MultiTool_ProfilUpgradeActive','1');
        }
        else
        {
            localStorage.setItem('E2MultiTool_ProfilUpgradeActive','0');
        }
    });

    //$( "#MaximizeMenu").draggable();


    //Get Own ID
    if(localStorage.getItem('E2MultiTool_UserID') == null)
    {
        var UserID = await GetAPIData("my/landfields/?limit=1&offset=0");
        UserID = UserID.results[0].owner;
        localStorage.setItem('E2MultiTool_UserID',UserID);
    }





    //Profil Upgrader
    FeatureProfileUpgrade();

    //To-do get right event....
    $(document).click(async function(){
        await timeout(2500);
        FeatureProfileUpgrade();
    });






}

MainFunction();



